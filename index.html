<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="It&apos;s a bolg that belongs to a industrious programmer">
<meta property="og:type" content="website">
<meta property="og:title" content="Ty_Isaac">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Ty_Isaac">
<meta property="og:description" content="It&apos;s a bolg that belongs to a industrious programmer">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ty_Isaac">
<meta name="twitter:description" content="It&apos;s a bolg that belongs to a industrious programmer">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title> Ty_Isaac </title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Ty_Isaac</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/23/OpenSSL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="TianyLi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://oo9y7ylu4.bkt.clouddn.com/image/blog/headIcon/IMG_7483.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ty_Isaac">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/11/23/OpenSSL/" itemprop="url">
                  Openssl Encrypt
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-23T11:23:38+08:00">
                2017-11-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index">
                    <span itemprop="name">编程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/11/23/OpenSSL/" class="leancloud_visitors" data-flag-title="Openssl Encrypt">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="OpenSSL实验"><a href="#OpenSSL实验" class="headerlink" title="OpenSSL实验"></a>OpenSSL实验</h1><h2 id="在linux-中编译和安装"><a href="#在linux-中编译和安装" class="headerlink" title="在linux 中编译和安装"></a>在linux 中编译和安装</h2><ol>
<li><p>获得 OpenSSL</p>
<p> 从OpenSSL的 <a href="http://www.openssl.org/source/" target="_blank" rel="external">官方网站</a> 即可下载当前版本的 OpenSSL 源代码压缩包。当前版本为 openssl-1.0.2l。</p>
<p> 在Linux中解压缩：</p>
<p> $tar zxf openssl-1.0.2l.tar.gz</p>
</li>
<li><p>编译和安装</p>
<p> $sudo ./config</p>
<p> $sudo make</p>
<p> $sudo make test</p>
<p> $sudo make install</p>
<p> 安装OpenSSL 开发包，这在所有的现代Linux发行版的标准软件仓库中都有。</p>
<p> $sudo apt-get install libssl-dev</p>
</li>
<li><p>编译代码文件</p>
<p> gcc 文件名.c -o 编译文件名 -lcrypto</p>
</li>
<li><p>我的代码使用方式</p>
<p> ECB模式，编译执行即可</p>
<p> CBC模式，分加密 和 解密 文件，需要先自己写data文件。 根据提示输入 文件名等信息</p>
<p> CFB模式、OFB模式，编译执行即可</p>
<p> AES模式，编译执行即可</p>
<p> RC4模式，编译执行即可</p>
<p> RSA加密，需要根据下文生成公钥和私钥，然后编译执行</p>
<p> RSA签名和认证，编译执行就可以</p>
</li>
</ol>
<h2 id="实验三-对称加密算法实验"><a href="#实验三-对称加密算法实验" class="headerlink" title="实验三 对称加密算法实验"></a>实验三 对称加密算法实验</h2><p>加密一般分为对称加密(Symmetric Key Encryption) 和非对称加密(Asymmetric Key Encryption)。对称加密又分为分组加密和序列密码。</p>
<p>分组密码，也叫块加密(block cyphers)，一次加密明文中的一个块。是将明文按一定的位长分组，明文组经过加密运算得到密文组，密文组经过解密运算（加密运算的逆运算），还原成明文组。</p>
<p>序列密码，也叫流加密(stream cyphers)，一次加密明文中的一个位。是指利用少量的密钥(制乱元素) 通过某种复杂的运算(密码算法) 产生大量的伪随机位流，用于对明文位流的加密。解密是指用同样的密钥和密码算法及与加密相同的伪随机位流，用于还原明文位流。</p>
<ol>
<li><p>DES 算法接口 </p>
<p> DES 加密算法是分组算法。 DES 的基本操作是把 64bit 明文在 56 bit 密钥指引下加密成64位密文</p>
<p> DES(IN,KEY) = OUT</p>
<p> 在openSSL中，DES算法的基本函数就是ECB 操作模式对应的函数  ==DES_ecb_encrypt()== 。该函数把一个8字节明文分组input加密成为一个 8 字节密文分组 output。</p>
<p> 参数中密钥结构 ks 是用函数 DES_set_key()准备好的， 而密钥 key 是用随机数算法产生的 64 个随机比特。</p>
<p> 参数enc 指示数 enc 指示是加密还是解密。</p>
<p> <strong>ECB操作模式</strong></p>
<p> 电子密码本模式，是最古老最简单的模式，将加密的数据分成若干组，每组的大小跟加密密钥长度相同，每组都使用相同的密钥加密，如果最后一个分组长度不够64位，要补齐64位。</p>
<p> 该函数每次只加密一个分组，因此用来加密很多数据时并不方便。</p>
 <figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">DES_ecb_encrypt</span><span class="params">(const_DES_cblock *input,DES_cblock *output, DES_key_schedule *ks,<span class="keyword">int</span> enc)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">DES_set_key</span><span class="params">(const_DES_cblock *key,DES_key_schedule *schedule)</span></span>;</div></pre></td></tr></table></figure>
<p> 特点：每次Key、明文、密文的长度都必须是64位 ；一个错误仅仅会对一个密文块产生影响；</p>
<p> ​</p>
<p> <strong>CBC操作模式</strong></p>
<p> 加密块链模式，与ECB模式最大的不同是加入了初始向量</p>
<p> DES 算法 CBC 操作模式加解密函数是 ==DES_ncbc_encrypt()==。参数length指示输入字节长度。如果长度不是8字节的倍数，则会被用0填充到8字节的倍数。因此，输出可能比length长，而且必然是8字节的倍数。</p>
 <figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">DES_ncbc_encrypt</span><span class="params">(<span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> *input,<span class="keyword">unsigned</span> <span class="keyword">char</span> *output, <span class="keyword">long</span> length, DES_key_schedule *schedule, DES_cblock *ivec, <span class="keyword">int</span> enc)</span></span></div></pre></td></tr></table></figure>
<p> 特点：</p>
<ul>
<li>每次加密的密文长度为64位(8字节)；</li>
<li>当相同的明文使用相同的密钥和初始向量的时候CBC模式总是产生相同的密文；</li>
<li>密文块要依赖以前的操作结果，所以密文块不能进行重新排列</li>
<li>可以使用不同的初始化向量来避免产生相同的密文，一定程度抵御字典共计</li>
<li><p>一个错误发生后，当前和以后的密文都将被影响</p>
<p>​</p>
<p><strong>CFB操作模式</strong></p>
<p>加密反馈模式，克服了需要等待8个字节才能加密的缺点，采用了分组密码作为流密码的密钥流生成器。</p>
<p>DES算法 CFB 操作模式加密函数是 DES_cfb_encrypt() 。参数length 指示输入字节长度。参数numbits 指示CFB 每次循环加密多少比特明文，也即密文反馈的比特数目。 ivec是初始向量，被看做第0个密文分组，是不用保密但应随机取值的8个字节。如果在一次会话中多次调用 DES_cfb_encrypt()，则应记忆ivec。<br>由于 CFB 模式中每次 DES 基本操作<br>只加密 numbits 比特明文，因此如果 numbits 太小则效率太低。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">DES_cfb_encrypt</span><span class="params">(<span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> *in, <span class="keyword">unsigned</span> <span class="keyword">char</span> *out, <span class="keyword">int</span> numbits, <span class="keyword">long</span> length, DES_key_schedule *schedule, DES_cblock *ivec, <span class="keyword">int</span> enc)</span></span>;</div></pre></td></tr></table></figure>
<p>​</p>
<p><strong>OFB操作模式</strong></p>
<p>与CFB模式不同之处在于，加密移位寄存器与密文无关了，仅与加密key和加密算法有关。</p>
<p>输出反馈模式，允许对不同字区大小编密码，但是它与密码反馈模式主要的区别在于编字区函数密码的输出是反馈（而不是密码）</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">DES_ofb_encrypt</span><span class="params">(<span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> *in,<span class="keyword">unsigned</span> <span class="keyword">char</span> *out,<span class="keyword">int</span> numbits,<span class="keyword">long</span> length,DES_key_schedule *schedule,DES_cblock *ivec)</span></span>;</div></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">DES_ofb64_encrypt</span><span class="params">(<span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> *in,<span class="keyword">unsigned</span> <span class="keyword">char</span> *out,<span class="keyword">long</span> length,DES_key_schedule *schedule,DES_cblock *ivec,<span class="keyword">int</span>* num)</span></span>;</div></pre></td></tr></table></figure>
<p>​</p>
</li>
</ul>
</li>
<li><p>AES 算法接口</p>
<p> 典型参数的 AES 的基本操作是把 128 比特明文在 128 比特密钥指引下加密成 128 比特密文。OpenSSL 中关于 AES 的函数名和参数接口和 DES 的雷同。相关函数名如下(参数略)。</p>
 <figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">AES_set_encrypt_key</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">AES_set_decrypt_key</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">AES_ecb_encrypt</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">AES_cbc_encrypt</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">AES_cfb128_encrypt</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">AES_ofb128_encrypt</span><span class="params">()</span></span>;</div></pre></td></tr></table></figure>
</li>
<li><p>RC4</p>
<p> RC4 密码算法是流算法，也叫序列算法。流算法是从密钥作为种子产生密钥流，明文比特流和密钥流异或即加密。RC4 算法由于算法简洁，速度极快，密钥长度可变，而且也没有填充的麻烦，因此在很多场合值得大力推荐。</p>
<p> OpenSSL 中 RC4 算法有两个函数: RC4_set_key()设置密钥，RC4()加解密。可以把 RC4 看作异或，因此加密两次即解密。</p>
 <figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">RC4set_key</span><span class="params">(RC4KEY key, <span class="keyword">int</span> len, <span class="keyword">const</span> <span class="keyword">unsigned</span> chardata)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">RC4</span><span class="params">(RC4_KEY key, <span class="keyword">unsigned</span> <span class="keyword">long</span> len, <span class="keyword">const</span> <span class="keyword">unsigned</span> charindata, <span class="keyword">unsigned</span> <span class="keyword">char</span> *outdata)</span></span>;</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="实验四-公钥算法实验"><a href="#实验四-公钥算法实验" class="headerlink" title="实验四 公钥算法实验"></a>实验四 公钥算法实验</h2><p>使用公钥密码算法可以克服协商对称密钥的困难，也可以用来认证和签名。为了避免公钥算法的速度缺陷，当前普遍使用混合密码体制，即使用公钥算法做鉴别和协商会话密钥，使用对称算法加密批量数据。</p>
<p>公钥密码算法当前仍是 RSA 算法占据统治地位。OpenSSL加密函数库中提供了对RSA等算法的支持。</p>
<p>不同于对称加密算法中加密和解密使用同样的密钥，公钥算法分为加密密钥 K1 和 解密密钥 K2 两部分，而且从 K1 很难计算和推导出 K2。 这样就可以保密 K2 而公布K1，从而大大简化了密钥管理。习惯上 K1 称为公钥 ，K2 称为私钥。</p>
<p>加密使用公钥，解密使用私钥</p>
<p>ENC (P , K1) = C</p>
<p>DEC (C , K2) = P</p>
<p>RSA 算法大致步骤</p>
<ol>
<li>寻找两个随机大素数 p 和 q ，保证p，q不相同</li>
<li>计算模 n = pq 和 Euler 函数  f(n) = (p-1)(q-1)</li>
<li>寻找一个与 f(n) 互质的数 e ，满足 1 &lt; e &lt; f(n)</li>
<li>选取 e 后用扩展 Euclid算法求数 d 满足 e * d ≡1 mod f(n)</li>
<li>保密私钥 KR = (d , n) ，发布公钥 KU = (e, n)</li>
<li>加密，先将明文变换成 0 至 n-1 的一个整数 M。若明文较长，可先分割成适当的组，然后再进行交换， 加密过程为 <img src="http://img.hexun.com/2009-06-24/118958535.gif" alt="img"></li>
<li>解密， <img src="http://img.hexun.com/2009-06-24/118958536.gif" alt="img"></li>
</ol>
<h3 id="RSA-密钥产生"><a href="#RSA-密钥产生" class="headerlink" title="RSA 密钥产生"></a>RSA 密钥产生</h3><p>RSA 密钥产生函数 RSA_generate_key()，需要指定模长比特数 bits 和公钥指数 e。另外两个参数为 NULL 即可。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">RSA * RSA_generate_key(int bits, unsigned long e, void (*callback) (int,int,void *),void *cb_arg);</div></pre></td></tr></table></figure>
<p>目前对于长达663比特的 RSA 模数已经有成功分解的先例，因此当前典型的应用场合使用1024比特模长的 RSA 算法，此时一个分组是 128 字节。</p>
<p>如果从文件中读取密钥，可使用函数PEM_read_bio_PrivateKey()/ PEM_read_bio_PUBKEY()，其中 EVP_PKEY 中包含一个 RSA 结构，可以引用。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function">EVP_PKEY *<span class="title">PEM_read_bio_PrivateKey</span><span class="params">(BIO *bp, EVP_PKEY **x,</span></span></div><div class="line">pem_password_cb *cb, <span class="keyword">void</span> *u);</div></pre></td></tr></table></figure>
<h3 id="RSA-加密和解密"><a href="#RSA-加密和解密" class="headerlink" title="RSA 加密和解密"></a>RSA 加密和解密</h3><p>RSA算法生成密钥</p>
<p><strong>1. 生成一个密钥</strong> </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl genrsa -out test.key 1024</div></pre></td></tr></table></figure>
<p>选项 -out 指定生成文件。该文件包含了公钥和私钥两部分，既可以用来加密也可以用来解密。 1024 表示生成密钥长度 </p>
<p><strong>2.将公钥提取出来</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl rsa -in test.key -pubout -out test_pub.key</div></pre></td></tr></table></figure>
<p>选项 -in 指定输入文件，-out 指定提取生成公钥的文件名。现在我们有一个公钥，一个私钥（包含公钥）</p>
<p>在以后的 RSA 代码中都会用到的公钥和私钥文件</p>
<p>RSA 加密函数 RSA_public_encrypt()使用公钥部分，解密函 RSA_private_decrypt() 使用私钥。填 充 方 式 常 用 的 有 两 种 RSA_PKCS1_PADDING 和 RSA_PKCS1_OAEP_PADDING。出错时返回-1&gt;输入必须比 RSA 钥模长短至少 11 字节(在 RSA_PKCS1_PADDING 时?)。输出长度等于 RSA 钥的模长。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">RSA_public_encrypt</span><span class="params">(<span class="keyword">int</span> flen, <span class="keyword">const</span> *from,<span class="keyword">unsigned</span> <span class="keyword">char</span> *to, RSA *rsa,<span class="keyword">int</span> padding)</span></span>; </div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">RSA_private_decrypt</span><span class="params">(<span class="keyword">int</span> flen, <span class="keyword">const</span> *from,<span class="keyword">unsigned</span> <span class="keyword">char</span> *to, RSA *rsa,<span class="keyword">int</span> padding)</span></span>;</div></pre></td></tr></table></figure>
<h3 id="RSA-签名和验证"><a href="#RSA-签名和验证" class="headerlink" title="RSA 签名和验证"></a>RSA 签名和验证</h3><p>签名使用私钥，验证使用公钥。RSA签名操作是把被签署消息的散列值编码后用私钥加密，因此函数中参数 type 用来指示散列函数的类型，一般是NID_MD5,NID_sha1 正确情况下返回 0 。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">RSA_sign</span><span class="params">(<span class="keyword">int</span> type, <span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> *m, <span class="keyword">unsigned</span> <span class="keyword">int</span> m_length, <span class="keyword">unsigned</span> <span class="keyword">char</span> *sigret, <span class="keyword">unsigned</span> <span class="keyword">int</span> *siglen, RSA *rsa)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">RSA_verify</span><span class="params">(<span class="keyword">int</span> type, <span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> *m, <span class="keyword">unsigned</span> <span class="keyword">int</span> m_length, <span class="keyword">unsigned</span> <span class="keyword">char</span> *sigbuf, <span class="keyword">unsigned</span> <span class="keyword">int</span> siglen, RSA *rsa)</span></span>;</div></pre></td></tr></table></figure>
<h1 id="复习"><a href="#复习" class="headerlink" title="复习"></a>复习</h1><p>抗否认</p>
<p>抵赖性</p>
<p>完整性</p>
<p>认证问题</p>
<p>实验报告提交要求</p>
<p>danny0128@126.com</p>
<p>主题 ： 2014IS 一个doc 文档</p>
<p>doc 文档命名： 学号+姓名.doc</p>
<p>deadline : </p>
<p>周五那一天 半夜12点</p>
<p>实验结束后实验报告邮件</p>
<p>平时成绩 ： 网络登录 + 小测验 +  </p>
<p>基本概念</p>
<p>数字证书，ITEM 术语  ，穷举攻击，所有的基本概念</p>
<p>这是啥，为啥，原理性。 数字证书怎么保证认证， kerberos 协议如何认证，道理讲清楚</p>
<p>基本原理</p>
<p>基本理论，基本原理，基本应用 </p>
<p>重点搞清楚原理</p>
<p>第三章，第四章，第五章 </p>
<p>第六章三重des 和流</p>
<h1 id="课程主题"><a href="#课程主题" class="headerlink" title="课程主题"></a>课程主题</h1><h2 id="密码学"><a href="#密码学" class="headerlink" title="密码学"></a>密码学</h2><h3 id="传统密码学"><a href="#传统密码学" class="headerlink" title="传统密码学"></a>传统密码学</h3><ol>
<li>古典密码学</li>
<li>现代密码学    DES/AES</li>
</ol>
<h3 id="公钥密码"><a href="#公钥密码" class="headerlink" title="公钥密码"></a>公钥密码</h3><p>RSA / D-H</p>
<h3 id="Hash-函数-MAC-函数-数字签名"><a href="#Hash-函数-MAC-函数-数字签名" class="headerlink" title="Hash 函数 / MAC 函数 / 数字签名"></a>Hash 函数 / MAC 函数 / 数字签名</h3><h2 id="网络安全实践"><a href="#网络安全实践" class="headerlink" title="网络安全实践"></a>网络安全实践</h2><h1 id="考试"><a href="#考试" class="headerlink" title="考试"></a>考试</h1><h2 id="复习-1"><a href="#复习-1" class="headerlink" title="复习"></a>复习</h2><h3 id="第一章-概述"><a href="#第一章-概述" class="headerlink" title="第一章 概述"></a>第一章 概述</h3><p>网络空间</p>
<p>OSI安全框架：安全性攻击、安全机制、安全服务</p>
<p>安全攻击：</p>
<ul>
<li>任何危及信息系统安全的行为</li>
</ul>
<ul>
<li>分类：主动，对数据流进行修改或伪造数据(伪装、重播、消息修改、拒绝服务) 、 被动，对传输进行监听(内容泄露、流量分析)</li>
</ul>
<p>安全服务：</p>
<ul>
<li>加强数据处理系统和信息传输的安全性的一种处理过程或通信服务。</li>
<li>分类：<ul>
<li>认证：保证通信双方是它所声称的实体。（同等实体认证、数据源认证）</li>
<li>访问控制：阻止对资源的非授权使用</li>
<li>数据保密性：保护数据免于非授权泄露</li>
<li>数据完整性：保证收到的数据的确是授权实体所发出的数据（没有修改、插入、删除或重播）</li>
<li>不可否认性：防止通信过程中，任一通信实体尽心否认的行为</li>
</ul>
</li>
</ul>
<p>安全机制：</p>
<ul>
<li>用来检测、阻止攻击过从攻击状态恢复到正常状态的过程</li>
</ul>
<ul>
<li>加密、数字签名、访问控制、数据完整性、认证交换、流量填充、路由控制</li>
</ul>
<h3 id="第二章-传统加密技术"><a href="#第二章-传统加密技术" class="headerlink" title="第二章 传统加密技术"></a>第二章 传统加密技术</h3><p>对称密码模型 ：明文、加密算法、密钥、密文、解密算法</p>
<p>传统密码安全使用两个要求：</p>
<ul>
<li>加密算法必须足够强的</li>
<li>发送者和接收者必须在某种安全的形式下活动密钥并且必须保证密钥安全</li>
</ul>
<p>密码编码学系统的独立特征：</p>
<ul>
<li>转换明文为密文的运算类型，所有的加密算法都基于两个原理，替代和置换</li>
<li>所用的密钥数，对称密码 和 非对称密码</li>
<li>处理明文的方法， 分组密码 和 流密码</li>
</ul>
<p>密码分析学：利用算法的特征来推导特定的明文或使用的密钥。</p>
<p>穷举攻击：对一条密文尝试所有可能的密钥，直到把它转化为可读的有意义的明文</p>
<p>无条件安全：无论有多少可使用的密文，都不足以唯一地确定所对应的明文。</p>
<p>计算安全：</p>
<ul>
<li>破译密码的代价超出密文信息的价值 </li>
<li>破译密码的时间超出密文信息的有效生命期</li>
</ul>
<p>代替技术：</p>
<ul>
<li>定义：将明文字母替换成其他字母、数字或符号。</li>
<li>凯撒密码：对字母表中的每个字母用它之后的第三个字母来替代。</li>
<li>单表代替密码：明文的单个字母用1个字母表加密</li>
<li>Playfair密码：明文的双字母音节作为单元转换成密文的双字母音节</li>
<li>Hill密码：m个连续明文字母替换成m个密文字母</li>
<li>多表代换密码：明文采用不同的单表代换</li>
<li>一次一密：随机密钥，密钥只对一条信息加密，无法实现</li>
</ul>
<p>置换技术：对明文进行置换（仅改变位置）</p>
<h3 id="第三章-分组密码"><a href="#第三章-分组密码" class="headerlink" title="第三章 分组密码"></a>第三章 分组密码</h3><p>流密码：每次加密数据流的一位/一个字节，使用密钥作为种子产生伪随机序列并和明文异或产生密文，两次异或即解密。</p>
<p>分组密码：将明文分成固定长度的块，对每个分组用相同算法和密钥加/解密（分组一般为64bit）输出密文与明文分组一样长的密文分组。许多分组密码采用Feistel结构（由许多相同轮函数组成，每一轮里，对输入数据的一半进行代替，接着用一个置换来交换数据的两个部分。每轮使用不同的子密钥。</p>
<p>Feistel密码建议使用乘积密码来逼近理想分组密码，建议交替使用代替和置换。   </p>
<ul>
<li>混淆：尽可能使用密文和加密密钥间统计关系更复杂，以阻止攻击者发现密钥</li>
<li>扩散：使明文的统计特征消失在密文中</li>
</ul>
<p>Feistel 密码设计元素：</p>
<ul>
<li>分组长度：分组越长意味着安全性越高，但是会降低加/解密速度</li>
<li>密钥长度：密钥较长意味着安全性较高，但会降低加/解密速度</li>
<li>迭代轮数：典型值 16</li>
</ul>
<p>数据加密标准(DES)：采用64位分组长度和56位密钥长度，输出密文64位。</p>
<p>雪崩效应：明文或密钥的某一位发生变化会导致密文的很多位都发生变化。</p>
<p>链接第6章：</p>
<p>ECB 电子密码本：用相同的密钥分别对明文分组独立加密，每次使用相同的密钥加密。适合于数据较少的情况，比如加密密钥。很长的消息ECB模式不安全</p>
<p>CBC密文分组链接：加密算法的输入是下一个明文组和上一个密文组的异或，最后分组不完整就填充。面向分组的通用传输，认证</p>
<p>CFB密文反馈模式：可以将分组密码当做流密码使用。不需要填充明文分组</p>
<p>OFB输出反馈模式：和CFB类似，它用加密函数的输出填充移位寄存器。而CFB使用密文单元来填充。 优点：传输过程中在某位上发生的错误不会影响其他位。 缺点：抗消息流篡改攻击能力不如CFB</p>
<h3 id="第四章-数论和有限域"><a href="#第四章-数论和有限域" class="headerlink" title="第四章 数论和有限域"></a>第四章 数论和有限域</h3><p>群、环、域</p>
<p>Euclid算法求最大公因子（辗转相除法）。继续除法过程直到余数为0</p>
<p>模运算 </p>
<h3 id="第五章-高级加密标准"><a href="#第五章-高级加密标准" class="headerlink" title="第五章 高级加密标准"></a>第五章 高级加密标准</h3><p>AES 高级加密标准：对称分组密码算法，分组长度为128位，密钥长度为128位、192位或256位。 </p>
<p>四个不同阶段： </p>
<ul>
<li>字节替代：用一个</li>
<li>行位移：简单置换</li>
<li>列混淆、</li>
<li>轮密钥加</li>
</ul>
<p>AES vs DES ：</p>
<p>并行处理整个分组 vs 一次处理一半分组</p>
<p>各个部件必须可逆 vs F函数无须可逆</p>
<p>AES不是Feistel 结构（经典Feistel 结构中，数据分组中的一半被用来修改数据分组的另一半，然后交换这两个分组）</p>
<p>AES中是每一轮都是用代替和混淆将整个数据分组作为单一矩阵处理</p>
<h3 id="第六章-分组密码工作模式"><a href="#第六章-分组密码工作模式" class="headerlink" title="第六章 分组密码工作模式"></a>第六章 分组密码工作模式</h3><p>多重加密是将一个加密算法使用多次的技术</p>
<p>双重DES 即进行两次加密，每次使用不同的密钥，但易遭遇中间相遇攻击</p>
<p>中间相遇攻击：将 p 按所有可能的密钥 K~1~ 加密，得到结果放在表内。然后将 C 用所有可能的密钥 K~2~ 解密，每解密一次就将解密结果与表中的值比较，如果相等就用此密钥对对一个新的明密文进行验证。</p>
<p>流密码：每次加密一个字节的明文，随机密钥流与明文的每一个字节进行对位异或运算，得到一个字节</p>
<p>流密码设计因素：加密序列的周期要长、密钥流尽可能地接近于真正随机数流的特征。</p>
<p>链路加密 ：加密是在系统中每一段通信链路的两端独立发生，链路之间每次交换都必须被解密。</p>
<p>端对端加密：加解密过程在系统两端进行，在两端需要加密装置，源主机与目的主机共享密钥</p>
<p>伪随机数发生器两种算法：线性同余、BBS</p>
<p>对称加密如何实现密钥分发？</p>
<ol>
<li>密钥分配为需要传输和加密数据的通信双方提供传递密钥的功能。主密钥不经常使用但长期使用，会话密钥临时生成和分发给通信双方</li>
<li>密钥分配模式（5个步骤）</li>
</ol>
<h3 id="第八章-数论入门"><a href="#第八章-数论入门" class="headerlink" title="第八章 数论入门"></a>第八章 数论入门</h3><p>费马定理：</p>
<h3 id="第九章-公钥密码学与RSA"><a href="#第九章-公钥密码学与RSA" class="headerlink" title="第九章 公钥密码学与RSA"></a>第九章 公钥密码学与RSA</h3><p>公钥算法用两个密钥中的一个及加密算法将明文转换位密文。用另一个密钥及解密算法从密文恢复出明文。</p>
<p>特点：仅根据密码算法和加密密钥来确定解密密钥在计算上不可行。 两个密钥任何一个都可以用来加密，另一个用来解密</p>
<p>密码体制的应用：加密/解密 、数字签名、密钥交换</p>
<p>RSA算法：使用乘方运算，明文以分组为单位进行加密，每个分组的二进制值均小于n。</p>
<h3 id="第十一章-消息认证和Hash函数"><a href="#第十一章-消息认证和Hash函数" class="headerlink" title="第十一章 消息认证和Hash函数"></a>第十一章 消息认证和Hash函数</h3><p>消息认证是用来验证消息完整性的一种机制或服务，确保收到的数据和发送时一样，切发送方声称的身份真实有效</p>
<p>消息认证码：利用密钥来生成一个固定长度的短数据块，并将该数据块附加在消息之后</p>
<p>Hash函数：将可变长度的消息映射为固定长度的Hash值或消息摘要。</p>
<h3 id="第十三章-数字签名"><a href="#第十三章-数字签名" class="headerlink" title="第十三章 数字签名"></a>第十三章 数字签名</h3><p>数字签名：一种认证机制，使得消息的产生着可以添加一个起签名作用的码字。通过计算消息的hash值并用产生者的私钥加密hash值来生成签名。签名保证了消息的来源和完整性。</p>
<p>数字签名标准是NIST标准，使用安全HASH算法(SHA)</p>
<p>数字签名特征：</p>
<p>能验证签名者、签名日期和时间</p>
<p>能认证被签的消息内容</p>
<p>签名能由第三方仲裁</p>
<p>数字签名需求：</p>
<ol>
<li>签名必须是与消息相关的二进制位串。</li>
<li>签名必须使用发送方某些独有的信息，以防伪造和否认</li>
<li>产生数字签名比较容易。</li>
<li>识别和验证数字签名比较容易。</li>
<li>伪造数字签名在计算上是不可以行的</li>
</ol>
<h3 id="第十四章-认证应用"><a href="#第十四章-认证应用" class="headerlink" title="第十四章 认证应用"></a>第十四章 认证应用</h3><p>kerberos 解决问题：在开放的分布式网络环境中，用户通过工作站访问服务器提供的服务存在问题</p>
<p>kerberos 通过提供一个集中的授权服务器来负责用户对服务器的认证和服务器对用户的认证。 </p>
<p>kerberos ：安全性、可靠性、透明性、可伸缩</p>
<p>三个概念： 认证服务器（AS）：将所有用户口令集中存在本地数据库，其与每个应用服务器共享一个唯一密钥 ； 客户端（C）：代替用户与服务器进行信息交换  ；票据 （Ticket）：身份或权利的证明</p>
<p>kerberos 简单认证会话过程：</p>
<p>简单认证的问题：1. 每一访问新服务需要新的票据，导致用户多次输入口令 2.用明文传递的用户口令会被窃听</p>
<h2 id="问答题考点"><a href="#问答题考点" class="headerlink" title="问答题考点"></a>问答题考点</h2><ol>
<li><p>对称加密算法</p>
<ol>
<li><p>五个基本要素：明文、密文、密钥、加密算法、解密算法</p>
</li>
<li><p>分组密码算法：</p>
<p>明文被分为固定长度的块（即分组），对每个分组用相同的算法和密钥加解密。分组一般为 n = 64 bit ，或更长（填充），密文分组和明文分组同样长</p>
</li>
<li><p>流密码算法</p>
<p>每次加密一个比特，适合比如远程终端输入等应用。流密码可用伪随机数发生器实现。密钥作为随机数种子，产生密钥流 keystream</p>
</li>
<li><p>比较</p>
<ul>
<li>粒度  8字节分组 vs 1比特 或 1字节</li>
<li>相同的明文分组，总是输出相同的密文分组；流密码输出不同的密文比特</li>
<li>流密码快很多</li>
</ul>
</li>
<li><p>工作模式</p>
<ul>
<li>电子密码本模式  ECB操作模式</li>
<li>密码分组链接模式  CBC 操作模式</li>
<li>密码反馈模式  CFB 操作模式</li>
<li>输出反馈模式  OFB操作模式</li>
<li>计数模式  RC4操作模式</li>
</ul>
</li>
</ol>
</li>
<li><p>非对称加密算法</p>
<ol>
<li><p>对称加密算法</p>
<p>加密：E ( P , K ) = C   解密 ： D ( C , K ) = P</p>
</li>
<li><p>非对称加密算法</p>
<ul>
<li><p>密钥：K = ( Kd , Ke ) </p>
</li>
<li><p>加密：E ( P , Ke ) = C</p>
</li>
<li><p>解密：D ( C , Kd) = P</p>
<p>Kd 称为私钥，Ke称为私钥</p>
</li>
</ul>
</li>
<li><p>参数建立</p>
<p>每个用户生成密钥对 ( Ke , Kd )</p>
<p>Ke 或 Kd 是一个或几个数(大素数)，而不是随机比特(对称算法)</p>
<p>Ke 需要公开，Kd 个人保留</p>
</li>
<li><p>RSA算法</p>
</li>
</ol>
</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/05/Android/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="TianyLi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://oo9y7ylu4.bkt.clouddn.com/image/blog/headIcon/IMG_7483.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ty_Isaac">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/11/05/Android/" itemprop="url">
                  未命名
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-05T09:23:12+08:00">
                2017-11-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2017/11/05/Android/" class="leancloud_visitors" data-flag-title="">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h1><h2 id="Adapter"><a href="#Adapter" class="headerlink" title="Adapter"></a>Adapter</h2><h3 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h3><ul>
<li>Model : 通常可以理解为数据，负责执行程序的核心运算与判断逻辑。通过view获得用户输入的数据，然后根据从数据库查询相关的信息，最后进行运算和判断，再将得到的结果交给view来显示。</li>
<li>View : 用户的操作接口，说白了就是GUI，应该使用哪种接口组件,组件间的排列位置与顺序都需要设计</li>
<li>Controller : 控制器，作为 model 与 view 之间的枢纽，负责控制程序的执行流程以及对象之间的互动</li>
</ul>
<table>
<thead>
<tr>
<th>UI名称</th>
<th>类名/方法名</th>
<th>是否实现</th>
</tr>
</thead>
<tbody>
<tr>
<td>ListView</td>
<td></td>
<td>是</td>
</tr>
<tr>
<td>ActionBar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Menu</td>
<td>onCreateOptionsMenu()</td>
<td>是</td>
</tr>
<tr>
<td>ViewPager</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Gallery</td>
<td></td>
<td></td>
</tr>
<tr>
<td>GridView</td>
<td>GridView_init()</td>
<td>是</td>
</tr>
<tr>
<td>ImageView</td>
<td></td>
<td>是</td>
</tr>
<tr>
<td>ProgressBar</td>
<td></td>
<td></td>
</tr>
<tr>
<td>TextView</td>
<td></td>
<td>是</td>
</tr>
<tr>
<td>ScrollView</td>
<td></td>
<td></td>
</tr>
<tr>
<td>TimeView</td>
<td></td>
<td></td>
</tr>
<tr>
<td>TipView</td>
<td></td>
<td></td>
</tr>
<tr>
<td>FlipView</td>
<td>flipperPage_init()</td>
<td>是</td>
</tr>
<tr>
<td>ColorPickView</td>
<td></td>
<td></td>
</tr>
<tr>
<td>GraphView</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/22/OperatingSystem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="TianyLi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://oo9y7ylu4.bkt.clouddn.com/image/blog/headIcon/IMG_7483.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ty_Isaac">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/22/OperatingSystem/" itemprop="url">
                  操作系统
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-22T09:49:59+08:00">
                2017-09-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Science/" itemprop="url" rel="index">
                    <span itemprop="name">Computer Science</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/09/22/OperatingSystem/" class="leancloud_visitors" data-flag-title="操作系统">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="操作系统概述"><a href="#操作系统概述" class="headerlink" title="操作系统概述"></a>操作系统概述</h1><h2 id="操作系统的基本概念"><a href="#操作系统的基本概念" class="headerlink" title="操作系统的基本概念"></a>操作系统的基本概念</h2><h3 id="操作系统的概念"><a href="#操作系统的概念" class="headerlink" title="操作系统的概念"></a>操作系统的概念</h3><p>计算机分为四个部分：硬件、操作系统、应用程序、用户。操作系统管理各种应用程序，为应用程序提供基础，并充当计算机硬件与用户之间的中介。</p>
<p>操作系统(Operating System, OS) 控制和管理整个计算机系统的硬件和软件资源，并合理地组织调度计算机的工作和资源的分配。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/16/Restart-From-The-Origin/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="TianyLi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://oo9y7ylu4.bkt.clouddn.com/image/blog/headIcon/IMG_7483.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ty_Isaac">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/16/Restart-From-The-Origin/" itemprop="url">
                  Restart From The Origin
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-16T07:23:32+08:00">
                2017-09-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index">
                    <span itemprop="name">编程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/09/16/Restart-From-The-Origin/" class="leancloud_visitors" data-flag-title="Restart From The Origin">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>2017年9月15日，参加华为面试。 本科生的项目的确太水，没有内涵，是一味的形式化。没有任何的思想内涵和技巧在其中。本人痛定思痛重新开启了基础知识巩固。</p>
</blockquote>
<h1 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h1><h2 id="内部排序"><a href="#内部排序" class="headerlink" title="内部排序"></a>内部排序</h2><h3 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h3><p>常用的选择排序有两种：直接选择排序和堆排序。直接选择排序简单直观，但性能略差；堆排序是一种较为高效的选择排序方法，但实现起来略微复杂</p>
<h4 id="直接选择"><a href="#直接选择" class="headerlink" title="直接选择"></a>直接选择</h4><p>思路较为清晰：n个数字进行排序，需要执行 n-1 次循环</p>
<p>第一次循环比较：将记录定位在第一个数据上，使用第一个数据依次和它后面每个数字进行比较。如果第一个数据==大于==后面某个数据，则将其交换，依次类推。经过di第一轮循环，这组数中最小的数据被选出，被排放在第一位。</p>
<p>第二次循环比较：将记录定位在第二个数据上，使用第二个数据依次和它后面每个数字进行比较。如果第二个数据==大于==后面某个数据，则将其交换，依次类推。经过第二轮循环，这组数中第二小的数据被选出，被排放在第二位。</p>
<p>……</p>
<p>按上述规则进行 ==n-1== 次循环比较，这组数据中第 n-1 小(第二大) 的数据被选出，并被排在第 n-1 位；剩余即为最大的数据，被排在最后</p>
<p><strong>算法1.10</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">selectSort</span><span class="params">(<span class="keyword">int</span>[] unsorted)</span></span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;unsorted.length-<span class="number">1</span>;i++)&#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;unsorted.length;j++)&#123;</div><div class="line">            <span class="keyword">if</span>(unsorted[i]&gt;unsorted[j])&#123;</div><div class="line">                <span class="comment">//交换</span></div><div class="line">                <span class="keyword">int</span> temp = unsorted[j];</div><div class="line">                unsorted[j] = unsorted[i];</div><div class="line">                unsorted[i] = temp;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>问题：在每次循环比较中，程序一旦发现某个数据比第一位小，就立即交换它们。这保证了每次循环比较中，第一位数据永远是最小的，但是这增加了交换的次数，导致算法效率降低。</p>
<p>对上面的直接选择排序算法进行改进</p>
<p><strong>算法 1.11</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">improvedSelectSort</span><span class="params">(<span class="keyword">int</span>[] unsorted)</span></span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;unsorted.length-<span class="number">1</span>;i++)&#123;</div><div class="line">        <span class="keyword">int</span> minIndex = i;<span class="comment">//最小索引</span></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;unsorted.length;j++)&#123;</div><div class="line">            <span class="keyword">if</span>(unsorted[minIndex]&gt;unsorted[j])&#123;</div><div class="line">                minIndex = j;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(minIndex!=i)&#123;</div><div class="line">            <span class="keyword">int</span> temp = unsorted[i];</div><div class="line">            unsorted[i] = unsorted[minIndex];</div><div class="line">            unsorted[minIndex] = temp;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在改进后的排序算法中，每次循环比较的目的只是找出本次循环中最小数据的索引。</p>
<p>对于直接选择排序算法而言，假设有 n 个数据，数据交换的次数最多有 n-1 次，但程序比较次数较多。时间复杂度 : <strong>O(n^2^)</strong></p>
<p>直接选择排序算法空间效率很高，仅一个附加程序单元用于交换，空间复杂度 : <strong>O(1)</strong></p>
<h4 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h4><h3 id="交换排序"><a href="#交换排序" class="headerlink" title="交换排序"></a>交换排序</h3><h4 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h4><p><strong>算法 2.10</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">bubbleSort</span><span class="params">(<span class="keyword">int</span>[] unsorted)</span></span>&#123;</div><div class="line">     <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;unsorted.length-<span class="number">1</span>;i++)&#123;</div><div class="line">         <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</div><div class="line">         <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;unsorted.length;j++)&#123;</div><div class="line">             <span class="keyword">if</span>(unsorted[j]&gt;unsorted[j+<span class="number">1</span>])&#123;</div><div class="line">                 <span class="keyword">int</span> temp = unsorted[j];</div><div class="line">                 unsorted[j] = unsorted[j+<span class="number">1</span>];</div><div class="line">                 unsorted[j+<span class="number">1</span>] = temp;</div><div class="line">                 flag = <span class="keyword">true</span>;</div><div class="line">             &#125;</div><div class="line">         &#125;</div><div class="line">         <span class="comment">//如果某次循环未发生交换则数组已有序</span></div><div class="line">         <span class="keyword">if</span>(!flag)<span class="keyword">break</span>;</div><div class="line">     &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<h4 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h4><p>一个速度非常快的交换排序算法，基本思路：从待排序的数据序列中任取一个数据作为分界值，所有比它小的数据元素一律放在左边，所有比它大的数据元素一律放在右边。一趟遍历，该序列形成左、右两个子序列，左边序列中数据元素的值逗比分界值小，右边序列中数据元素的值都比分界值大。</p>
<p>然后对左、右两个子序列进行递归排序，对两个子序列重新选择中心元素并依此规则调整，直到每个子序列元素只剩一个，排序完成。</p>
<ol>
<li>定义一个 i 变量，i 变量从左边第一个索引开始，找大于分界值的元素的索引，并用 i 来记录它。</li>
<li>定义一个 j 变量，j 变量从右边第一个索引开始，找小于分界值的元素的索引，并用 j 来记录它。</li>
<li>如果 i &lt; j ，交换 i , j 索引处的元素</li>
</ol>
<p><strong>算法 3.10</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">subSort</span><span class="params">(<span class="keyword">int</span> unsorted[],<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(start&lt;end)&#123;</div><div class="line">        <span class="comment">//以第一个元素作为分界值</span></div><div class="line">        <span class="keyword">int</span> mid = unsorted[start];</div><div class="line">        <span class="comment">//i从左边开始搜索，搜索大于分界值的元素</span></div><div class="line">        <span class="keyword">int</span> leftCur = start;</div><div class="line">        <span class="comment">//rightCur从右边开始搜索，搜索小于分界值的元素</span></div><div class="line">        <span class="keyword">int</span> rightCur = end+<span class="number">1</span>;</div><div class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</div><div class="line">            <span class="comment">//找到大于分界值的元素的索引，或leftCur已经到了end处</span></div><div class="line">            <span class="keyword">while</span>(leftCur&lt;end&amp;&amp;unsorted[++leftCur]&lt;mid);</div><div class="line">            <span class="comment">//找到小于分界值元素的索引，或rightCur已经到了start处</span></div><div class="line">            <span class="keyword">while</span>(rightCur&gt;start&amp;&amp;unsorted[--rightCur]&gt;mid);</div><div class="line">            <span class="keyword">if</span>(leftCur&lt;rightCur)&#123;</div><div class="line">                <span class="keyword">int</span> temp = unsorted[leftCur];</div><div class="line">                unsorted[leftCur] = unsorted[rightCur];</div><div class="line">                unsorted[rightCur] = unsorted[leftCur];</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span>&#123;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">      	<span class="comment">//交换 分界 数 与 j的位置</span></div><div class="line">      	<span class="keyword">int</span> temp = unsorted[j];</div><div class="line">      	unsorted[j] = unsorted[start];</div><div class="line">      	unsorted[start] = temp;</div><div class="line">      </div><div class="line">      	<span class="comment">//递归左边子序列</span></div><div class="line">      	subSort(unsorted,start,j);</div><div class="line">      	<span class="comment">//递归右边子序列</span></div><div class="line">      	subSort(unsorted,j+<span class="number">1</span>,end);<span class="number">5</span></div><div class="line">      </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h3><p>非常常见的排序算法，包含直接插入排序，Shell排序和折半插入排序</p>
<h4 id="直接插入"><a href="#直接插入" class="headerlink" title="直接插入"></a>直接插入</h4><p>思路：依次将待排序的数据元素按其关键字值的大小插入前面的有序序列。插入排序由N-1趟排序组成。对于 p=1 到 N-1 趟，插入排序保证从位置 0 到 位置 p 上的元素为已排序状态。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Simple insertion sort.</div><div class="line"> * <span class="doctag">@param</span> a     an array of Comparable items.</div><div class="line"> * <span class="doctag">@param</span> &lt;AnyType&gt;</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;AnyType extends Comparable&lt;? <span class="keyword">super</span> AnyType&gt;&gt; <span class="function"><span class="keyword">void</span> <span class="title">insertionSort</span><span class="params">(AnyType []a)</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> j;</div><div class="line">    <span class="comment">//对从 1--a.length 中每一项进行插入，</span></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> p=<span class="number">1</span>;p&lt;a.length;p++)&#123;</div><div class="line">        AnyType tmp = a[p];</div><div class="line">        <span class="comment">//为a[p]寻找合适位置: 从a[p]开始往前搜索，比较如果小于则往前搜索，大于赋值</span></div><div class="line">        <span class="keyword">for</span>(j=p;j&gt;<span class="number">0</span>&amp;&amp;tmp.compareTo(a[j-<span class="number">1</span>])&lt;<span class="number">0</span>;j--)a[j] = a[j-<span class="number">1</span>];</div><div class="line">        a[j] = tmp;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="折半插入"><a href="#折半插入" class="headerlink" title="折半插入"></a>折半插入</h4><h5 id="折半查找"><a href="#折半查找" class="headerlink" title="折半查找"></a>折半查找</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> a[N];</div><div class="line"><span class="keyword">int</span> low=<span class="number">0</span>;</div><div class="line"><span class="keyword">int</span> high=length;</div><div class="line"><span class="keyword">int</span> mid=<span class="number">0</span>;</div><div class="line"><span class="keyword">while</span>(low&lt;=high)&#123;</div><div class="line">	mid=(low+high)/<span class="number">2</span>;</div><div class="line">  <span class="keyword">if</span>(a[mid]==x) <span class="keyword">break</span>;</div><div class="line">  <span class="keyword">else</span> <span class="keyword">if</span>(a[mid]&gt;x)high=mid;</div><div class="line">  <span class="keyword">else</span> low=mid</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Shell排序"><a href="#Shell排序" class="headerlink" title="Shell排序"></a>Shell排序</h4><h3 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h3><h3 id="筒式排序"><a href="#筒式排序" class="headerlink" title="筒式排序"></a>筒式排序</h3><h3 id="基数排序"><a href="#基数排序" class="headerlink" title="基数排序"></a>基数排序</h3><h2 id="外部排序"><a href="#外部排序" class="headerlink" title="外部排序"></a>外部排序</h2><h1 id="树"><a href="#树" class="headerlink" title="树"></a>树</h1>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/05/Struts2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="TianyLi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://oo9y7ylu4.bkt.clouddn.com/image/blog/headIcon/IMG_7483.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ty_Isaac">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/05/Struts2/" itemprop="url">
                  Struts2 Study
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-05T10:22:21+08:00">
                2017-09-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index">
                    <span itemprop="name">编程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/09/05/Struts2/" class="leancloud_visitors" data-flag-title="Struts2 Study">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Hello-World-Using-Struts-2"><a href="#Hello-World-Using-Struts-2" class="headerlink" title="Hello World Using Struts 2"></a>Hello World Using Struts 2</h1><h4 id="outline"><a href="#outline" class="headerlink" title="outline"></a>outline</h4><p>Suppose you want to create a simple “Hello World” example that display a welcome message. After setting up an empty basic Struts2 web application, to create a “Hello World”, to creat a “Hello World” example, you need to do four things:</p>
<ol>
<li>Create a class to store the welcome message (the model)</li>
<li>Create a server page to present the message (the view)</li>
<li>Create an Action class to  control the interaction between the user , the model , and the view (the controller)</li>
<li>Creat a mapping (==struts.xml==) to couple the Action class and view </li>
</ol>
<h4 id="The-Code"><a href="#The-Code" class="headerlink" title="The Code"></a>The Code</h4><p>Let’s modify the basic-struts project to add the following:</p>
<ul>
<li>a model class to store our message</li>
<li>a view that displays our message</li>
<li>an Action class to act as the controller</li>
<li>a configuration that ties everything together</li>
</ul>
<h3 id="Step-1-Create-The-Model-Class-MessageStore-java"><a href="#Step-1-Create-The-Model-Class-MessageStore-java" class="headerlink" title="Step 1 - Create The Model Class MessageStore.java"></a>Step 1 - Create The Model Class MessageStore.java</h3><p>Create the ==MessageStore== class in ==src/==</p>
<p><strong>MessageStore.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.isaac.message;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MessageStore</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> String message;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MessageStore</span><span class="params">()</span></span>&#123;</div><div class="line">        message = <span class="string">"Hello Struts User"</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> message;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Note the use of public getter method to allow access to the private message String attribute.</p>
<h3 id="Step-2-Create-The-Action-Class-HelloWorldAction-java"><a href="#Step-2-Create-The-Action-Class-HelloWorldAction-java" class="headerlink" title="Step 2 - Create The Action Class HelloWorldAction.java"></a>Step 2 - Create The Action Class HelloWorldAction.java</h3><p>We need an Action class to act as the Controller. The Action class responds to a user action (in this example that action will be clicking an HTML hyperlink and sending a specific URL to the Servlet container). One or more of the Action class’s methods are excuted and a String result is returned. Based on the value of the result, a specific view page(in this example that view page is HelloWorld.jsp) is rendered.</p>
<p>Note the package and import statements below.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.isaac.action;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.isaac.message.MessageStore;</div><div class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorldAction</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span></span>&#123;</div><div class="line">    <span class="keyword">private</span> MessageStore messageStore;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</div><div class="line">        messageStore = <span class="keyword">new</span> MessageStore();</div><div class="line">        <span class="keyword">return</span> SUCCESS;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> MessageStore <span class="title">getMessageStore</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> messageStore;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The Struts 2 framework will create an obejct of the ==HelloWorldAction== class and call the execute method in response to a user’s action (clicking on a hyperlink that sends a specific URL to the Servelet container).</p>
<p>In this example, the execute method creates an object of class ==MessageStore== and then returns the String constant ==SUCCESS==.</p>
<h3 id="Step-3-Create-The-View-HelloWorld-jsp"><a href="#Step-3-Create-The-View-HelloWorld-jsp" class="headerlink" title="Step 3 - Create The View HelloWorld.jsp"></a>Step 3 - Create The View HelloWorld.jsp</h3><p>We need a server page to present the message that is stored in the model class ==MessgeStore==. Create the below JSP in ==/web==</p>
<p><strong>HelloWorld.jsp</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;</div><div class="line">&lt;html&gt;</div><div class="line">  &lt;head&gt;</div><div class="line">    &lt;title&gt;$HelloWorld$&lt;/title&gt;</div><div class="line">  &lt;/head&gt;</div><div class="line">  &lt;body&gt;</div><div class="line">      This is result.jsp</div><div class="line">  &lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<h3 id="Step-4-Add-The-Struts-Configuration-In-struts-xml"><a href="#Step-4-Add-The-Struts-Configuration-In-struts-xml" class="headerlink" title="Step 4 - Add The Struts Configuration In struts.xml"></a>Step 4 - Add The Struts Configuration In struts.xml</h3><p>We need a mapping to tie the URL, the ==HelloWorldAction== class(controller), and the HelloWorld.jsp(the view) together. The mapping tells the Struts 2 framework whick class will respond to the user’s action(the URL), which method of that class will be executed, and what view to render based on the String result that method returns.</p>
<p>Edit the ==struts.xml== file to add the action mapping.</p>
<p><strong>struts.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="meta">&lt;!DOCTYPE struts PUBLIC</span></div><div class="line">        "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"</div><div class="line">        "http://struts.apache.org/dtds/struts-2.3.dtd"&gt;</div><div class="line"><span class="tag">&lt;<span class="name">struts</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"default"</span> <span class="attr">namespace</span>=<span class="string">"/"</span> <span class="attr">extends</span>=<span class="string">"struts-default"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"helloworld"</span> <span class="attr">class</span>=<span class="string">"com.isaac.action.HelloWorldAction"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">result</span>&gt;</span>/index.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">action</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">package</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">struts</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="How-the-Code-Works"><a href="#How-the-Code-Works" class="headerlink" title="How the Code Works"></a>How the Code Works</h2><p>Your browser sends to the web server a request for the URL <a href="http://localhost:8080/helloworld.action" target="_blank" rel="external">http://localhost:8080/helloworld.action</a>.</p>
<ol>
<li>The container receives from the web server a request for the resource ==hello.action==. According to the settings loaded from the web.xml, the container finds that all requests are being routed to ==org.apache.struts2.dispatcher.filter.StrutsPrepareAndExecuteFilter== , including the ==*.action== requets. The StrutsPrepareAndExecuteFilter is the entry point into the framework.</li>
<li>The framework looks for an action mapping named “helloworld”, and it finds that this mapping corresponds to the class “HelloWorldAction”. The framework instantiates the Action and calls the Action’s ==execute== method.</li>
<li>The ==execute== method creates the MessageStore object and returns ==SUCCESS==. The framework checks the action mapping to see what page to load if ==SUCCESS== is returned. The framework tells the container to render as the response to the request, the resource HelloWorld.jsp</li>
<li>A pure HTML response is sent back to the browser.</li>
</ol>
<h2 id="What-to-Remember"><a href="#What-to-Remember" class="headerlink" title="What to Remember"></a>What to Remember</h2><p>The framework uses Actions to process HTML forms and other requests. The ==Action== class returns a result-name such as ==SUCCESS==, ==ERROR== or ==INPUT==. Based on the mappings loaded from the struts.xml, a given result-name may select a page(as in this example), another action, or some other web resource(image, PDF).</p>
<p>When a server page is renderd, most often it will include dynamic data provided by the Action. To make it easy to display dynamic data, the framework provides a set of tags that can be used along with HTML markeup to create a server page.</p>
<h1 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h1><h3 id="常量配置"><a href="#常量配置" class="headerlink" title="常量配置"></a>常量配置</h3><h3 id="package元素"><a href="#package元素" class="headerlink" title="package元素"></a>package元素</h3><p>action配置包，Java代码中的“包”用来管理Java代码，放置命名冲突，package节点左右也一样，防止 action 冲突，在整个项目中指定一个唯一 name 属性</p>
<table>
<thead>
<tr>
<th>变量名</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>唯一标识</td>
</tr>
<tr>
<td>namespace</td>
<td>命名空间，影响所有该包下属的action访问路径</td>
</tr>
<tr>
<td>extends</td>
<td>指定继承 xx 配置文件，默认继承 strut-default.xml</td>
</tr>
<tr>
<td>abstruct</td>
<td>定义为抽象包，只能别的包去继承，通常用于项目的默认配置可放在此包中(通用配置放在此抽象包)</td>
</tr>
</tbody>
</table>
<h3 id="Action元素"><a href="#Action元素" class="headerlink" title="Action元素"></a>Action元素</h3><p>用于配置处理请求</p>
<table>
<thead>
<tr>
<th>变量名</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>action的名字，影响访问路径</td>
</tr>
<tr>
<td>class</td>
<td>指定 action 的全限定名</td>
</tr>
<tr>
<td>method</td>
<td>指定调用类的方法</td>
</tr>
</tbody>
</table>
<h3 id="Result-元素"><a href="#Result-元素" class="headerlink" title="Result 元素"></a>Result 元素</h3><p>配置 action 的响应，一个 action 可配置多个</p>
<table>
<thead>
<tr>
<th>变量名</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>与类中方法的返回值一致</td>
</tr>
<tr>
<td>type</td>
<td>请求响应的类型</td>
</tr>
</tbody>
</table>
<h3 id="写作配置"><a href="#写作配置" class="headerlink" title="写作配置"></a>写作配置</h3><p>对一个项目而言，通常配置文件可能会很多，此时可以采用包含 include 标签将各种配置文件分开存储</p>
<table>
<thead>
<tr>
<th>变量名</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt; include file=”xxx.xml” /&gt;</td>
<td>File文件路径</td>
</tr>
</tbody>
</table>
<h3 id="default-action-ref-元素"><a href="#default-action-ref-元素" class="headerlink" title="default-action-ref 元素"></a>default-action-ref 元素</h3><p>默认 action 配置，通用防止URL输入错误，显示404错误页面，但该页面往往对用户不友好，同一用默认配置</p>
<h3 id="default-class-ref元素"><a href="#default-class-ref元素" class="headerlink" title="default-class-ref元素"></a>default-class-ref元素</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">default-action-ref</span> <span class="attr">name</span>=<span class="string">"default"</span>&gt;</span><span class="tag">&lt;/<span class="name">default-action-ref</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="global-results元素"><a href="#global-results元素" class="headerlink" title="global-results元素"></a>global-results元素</h3><p>全局结果集配置，可以配置多个action共享的结果集</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">global-results</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"error"</span>&gt;</span>/505.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">global-results</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="动态方法调用"><a href="#动态方法调用" class="headerlink" title="动态方法调用"></a>动态方法调用</h1><p>通过 URL  指定调用的方法</p>
<h2 id="动态配置"><a href="#动态配置" class="headerlink" title="动态配置"></a>动态配置</h2><p>在不适用 action 的 method 通过 URL 指定嗲用后台的 xx 方法，使用action名!方法名，要实现通过URL 动态调用方法，需 “==struts.enable.DynaicMethodInvocation = true==” ，注意：在2.1以上的版本中默认为false</p>
<h2 id="使用通配符"><a href="#使用通配符" class="headerlink" title="使用通配符"></a>使用通配符</h2><p>在 action 的 name 属性中可以使用 “*” 命名，那么在其他属性中需要使用 “{1}” 或者 “{2}” 或者 “{0}” 取出 URL 路径</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"user_*"</span> <span class="attr">class</span>=<span class="string">"com.isaac.action.LoginAction"</span> <span class="attr">method</span>=<span class="string">"&#123;1&#125;"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"aaa"</span>&gt;</span>/login.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>/index.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">action</span>&gt;</span></div></pre></td></tr></table></figure>
<p>范例：</p>
<table>
<thead>
<tr>
<th>命名</th>
<th>取值</th>
</tr>
</thead>
<tbody>
<tr>
<td>name = “user_*”</td>
<td>{1} 取第一个星号的值</td>
</tr>
<tr>
<td>url=/user_add</td>
<td>{1}=add</td>
</tr>
</tbody>
</table>
<p>范例：</p>
<table>
<thead>
<tr>
<th>命名</th>
<th>取值</th>
</tr>
</thead>
<tbody>
<tr>
<td>name = “<em>_ </em>“</td>
<td>{1} 取第一个星号，{2} 取第二个星号</td>
</tr>
<tr>
<td>url=/user_add</td>
<td>{1}=user 通常出现在class属性中，{2}=add通常出现在method属性中</td>
</tr>
</tbody>
</table>
<p>{0} 所取出的数据就是类似如下效果：user_add</p>
<h1 id="接受请求参数"><a href="#接受请求参数" class="headerlink" title="接受请求参数"></a>接受请求参数</h1><p>Stust2 是 MVC 中的控制器（处理请求），那么在整个请求过程中，对参数的处理是Strust 的职责所在，接受和处理参数的分为属性驱动，模型驱动，域驱动</p>
<h2 id="属性驱动"><a href="#属性驱动" class="headerlink" title="属性驱动"></a>属性驱动</h2><p>直接在 action 的 POJO 类中声明与表单元素一致的属性，并生产匹配的 get/set 方法，Struts会自动将表单数据提交到action中，并直接给相应属性赋值</p>
<p>范例：html 代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"login.action"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">      用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">      密&amp;nbsp;码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span> &gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<p>范例：Java代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.Action;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginAction</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span></span>&#123;</div><div class="line">    <span class="comment">//属性名与表单元素要一致</span></div><div class="line">    <span class="keyword">private</span> String username;</div><div class="line">    <span class="keyword">private</span> String password;</div><div class="line">    <span class="keyword">private</span> String rrors; <span class="comment">//保存错误消息</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="comment">//逻辑判断 判断用户名和密码的正确性</span></div><div class="line">        System.out.println(<span class="keyword">this</span>);</div><div class="line"></div><div class="line">        <span class="keyword">if</span>(username.equals(<span class="string">"admin"</span>) &amp;&amp; password.equals(<span class="string">"admin"</span>))</div><div class="line">            <span class="keyword">return</span> SUCCESS;</div><div class="line">        <span class="keyword">this</span>.rrors = <span class="string">"用户名密码错误"</span>;</div><div class="line">        <span class="keyword">return</span> ERROR;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> username;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.username = username;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> password;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.password = password;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getRrors</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> rrors;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRrors</span><span class="params">(String rrors)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.rrors = rrors;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"LoginAction&#123;"</span> +</div><div class="line">                <span class="string">"username='"</span> + username + <span class="string">'\''</span> +</div><div class="line">                <span class="string">", password='"</span> + password + <span class="string">'\''</span> +</div><div class="line">                <span class="string">'&#125;'</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="域驱动"><a href="#域驱动" class="headerlink" title="域驱动"></a>域驱动</h2><p>通常情况下，表单元素往往对应一个实体，实体又往往放在实体层中，那么此时就需要在 action 中放入实体对象作为请求参数，域驱动的方式就是把实体中的对象作为 action 的属性</p>
<p><strong>范例</strong>：html代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"login.action"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">      用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"user.username"</span> <span class="attr">value</span>=<span class="string">"$&#123;user.username&#125;"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">      密&amp;nbsp;码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"user.password"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span> &gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<p><strong>范例</strong>：action 代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.Action;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.domain.User;</div><div class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginAction</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span></span>&#123;</div><div class="line">    <span class="comment">//属性名与表单元素要一致</span></div><div class="line">    <span class="keyword">private</span> User user;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">//逻辑判断 判断用户名和密码的正确性</span></div><div class="line">        System.out.println(user);</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.user.getUsername().equals(<span class="string">"admin"</span>) &amp;&amp; <span class="keyword">this</span>.user.getPassword().equals(<span class="string">"admin"</span>))</div><div class="line">            <span class="keyword">return</span> SUCCESS;</div><div class="line">        <span class="keyword">return</span> <span class="string">"failure"</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> user;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUser</span><span class="params">(User user)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.user = user;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="模型驱动"><a href="#模型驱动" class="headerlink" title="模型驱动"></a>模型驱动</h2><p>Struts 2 中提供了一个叫模型驱动的拦截器，要使用词模型驱动填充参数，需 action 类实现 ModelDriven 接口</p>
<p><strong>范例</strong>：html代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"login.action"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">     用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;username&#125;"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">     密&amp;nbsp;码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span> &gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<p><strong>范例</strong>：Java代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.Action;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.domain.User;</div><div class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</div><div class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ModelDriven;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginAction</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> <span class="keyword">implements</span> <span class="title">ModelDriven</span>&lt;<span class="title">User</span>&gt;</span>&#123;</div><div class="line">    <span class="comment">//属性名与表单元素要一致</span></div><div class="line">    <span class="keyword">private</span> User user;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="comment">//逻辑判断 判断用户名和密码的正确性</span></div><div class="line">        System.out.println(user);</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.user.getUsername().equals(<span class="string">"admin"</span>) &amp;&amp; <span class="keyword">this</span>.user.getPassword().equals(<span class="string">"admin"</span>))</div><div class="line">            <span class="keyword">return</span> SUCCESS;</div><div class="line">        <span class="keyword">return</span> <span class="string">"failure"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> user;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUser</span><span class="params">(User user)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.user = user;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getModel</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.user==<span class="keyword">null</span>)</div><div class="line">            user = <span class="keyword">new</span> User();</div><div class="line">        <span class="keyword">return</span> user;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="集合类参数"><a href="#集合类参数" class="headerlink" title="集合类参数"></a>集合类参数</h2><p>如果需要接受多个相同的对象参数，可以使用泛型集合，而不能采用数组方式</p>
<h1 id="获取-ServletAPI"><a href="#获取-ServletAPI" class="headerlink" title="获取 ServletAPI"></a>获取 ServletAPI</h1><p>ServletAPI 中有些什么东西？ web容器提供的各种内置对象 request, session, application 等，在struts2 中要获取这些对象，可以通过三种方式：ActionContext(Strust建议的) , ServletActionContext(可以获取真正的HttpServletRequest等)</p>
<h2 id="通过-ActionContext-获取"><a href="#通过-ActionContext-获取" class="headerlink" title="通过 ActionContext 获取"></a>通过 ActionContext 获取</h2><p>就是 action 的上下文，里面包含的每个请求的参数</p>
<p><strong>范例</strong>：action代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span></span>&#123;</div><div class="line">     ActionContext ctx = ActionContext.getContext();</div><div class="line">     <span class="comment">//request域中放入数据</span></div><div class="line">     ctx.put(<span class="string">"request"</span>,<span class="string">"xixixixi"</span>);</div><div class="line">     <span class="comment">///session域中放入数据</span></div><div class="line">     ctx.getSession().put(<span class="string">"session"</span>,<span class="string">"hhh"</span>);</div><div class="line">     <span class="comment">//application 域中放入数据</span></div><div class="line">     ctx.getApplication().put(<span class="string">"application"</span>,<span class="string">"eeee"</span>);</div><div class="line">     <span class="keyword">return</span> SUCCESS;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<p><strong>范例</strong>：jsp代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">   Request = $&#123;requestScope.request&#125;</div><div class="line">   Session = $&#123;sessionScope.session&#125;</div><div class="line">   Application = $&#123;applicationScope.application&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<p>通过以上代码，发现我们可以给这些对象中放入数据，但是通过 ActionContext 操作的对象并不是真正的 HttpServletrerequest 、HttpServletResponse 只是 ActionContext 提供的一个 map 而已，这样设计是为了降低对 ServletAPI 的耦合度</p>
<h2 id="通过-ServletActionContext-操作"><a href="#通过-ServletActionContext-操作" class="headerlink" title="通过 ServletActionContext 操作"></a>通过 ServletActionContext 操作</h2><h2 id="通过实现特定接口获取"><a href="#通过实现特定接口获取" class="headerlink" title="通过实现特定接口获取"></a>通过实现特定接口获取</h2><p>范例：action代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSession</span><span class="params">(Map&lt;String,Object&gt; session)</span></span>&#123;</div><div class="line">  session.put(<span class="string">"session"</span>,<span class="string">"cccc"</span>);</div><div class="line">  <span class="keyword">this</span>.mysession = session;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>范例：jsp代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">request = $&#123;requestScope.requeset&#125;</div><div class="line">session = $&#123;sessionScope.session&#125;</div><div class="line">application = $&#123;applicationScope.application&#125;</div></pre></td></tr></table></figure>
<h1 id="OGNL与值栈"><a href="#OGNL与值栈" class="headerlink" title="OGNL与值栈"></a>OGNL与值栈</h1><h2 id="Strust-请求处理流程"><a href="#Strust-请求处理流程" class="headerlink" title="Strust 请求处理流程"></a>Strust 请求处理流程</h2><p>Strust 接受请求并处理响应的流程</p>
<p>每次请求 Struts 会自动生成 ActionContext，这个对象就包含了请求所需的各种参数，并自动实例化Action类，调用自动的方法或者默认方法</p>
<p>在 ActionContext 中，全部是 Map 集合，主要包括六大对象：</p>
<p>request, session, application, attr, parameter, valuestack</p>
<h2 id="值栈"><a href="#值栈" class="headerlink" title="值栈"></a>值栈</h2><p>值栈是 Struts 2 框架提供的一个存储区域，是一个栈结构，往往存储Action实例</p>
<p>观察值栈的内容，值栈只是ActionContext对象中六大集合中的一个</p>
<p>对值栈的操作</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/25/Education/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="TianyLi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://oo9y7ylu4.bkt.clouddn.com/image/blog/headIcon/IMG_7483.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ty_Isaac">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/25/Education/" itemprop="url">
                  Education
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-25T09:58:46+08:00">
                2017-08-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/English/" itemprop="url" rel="index">
                    <span itemprop="name">英语</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/08/25/Education/" class="leancloud_visitors" data-flag-title="Education">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Education"><a href="#Education" class="headerlink" title="Education"></a>Education</h3><ul>
<li>Some teachers flet hindered by a lack of resources. 有些教师因资源不足而感到困难重重</li>
<li>the school curriculum 学校课程  / English is on the curriculum. 英语已纳入课程内容</li>
<li>radiate confidence 流露自信</li>
<li>These tasks were repetitive, lengthy and lacking any intrinisc interest.这些作业重复冗没有什么意义。</li>
<li>the intrinsic value of education教育的固有价值</li>
<li>Children do not know by instinct the difference between right and wrong. 儿童并非生来就会分辨非</li>
</ul>
<h4 id="家庭对教育的作用"><a href="#家庭对教育的作用" class="headerlink" title="家庭对教育的作用"></a>家庭对教育的作用</h4><ol>
<li><p>good parenting 父母的良好培养</p>
</li>
<li><p>build strong family relationships 建设具有凝聚力的家庭关系</p>
<ul>
<li>build a sense of belonging 建立起一种归属感</li>
<li>have meals as a family 一起进餐</li>
<li><u>share family chores 一起做家务</u></li>
<li>share ideas and feelings 分享想法和感受</li>
<li>solve problems together 通过合作解决问题</li>
<li>participate in community activities together 一起参加社区活动</li>
<li>strengthen family bonds 增进亲情</li>
<li>achieve a reasonable work-family balance实现工作和家庭之间的合理平衡</li>
<li>help their children with homework 帮助孩子做好功课</li>
<li>monitor academic performance of their children监督他们孩子的学业表现</li>
<li>are more involved in the education of their children（家长）更积极地参与到孩子的教育当中</li>
<li>teach their children good manners 教给孩子良好的举止</li>
<li>provide positive role models for their children为孩子提供正面榜样</li>
</ul>
</li>
<li><p>working parents 工作的家长们</p>
<ul>
<li>have busy careers 事业很忙碌</li>
<li>spend their after school hours without adult supervision（孩子们）在放学之后的时间里缺少成年人的看护</li>
<li><u>Internet addiction 网瘾</u></li>
<li>spend too much time online 花费过多的时间上网</li>
<li>weaken family bonds 削弱亲情</li>
<li>feel disconnected from each other（家长们）感觉彼此之间缺少联系</li>
<li><u>cause family conflict 引起家庭纠纷</u></li>
<li><u>high divorce rates 很高的离婚率</u></li>
</ul>
</li>
<li><p>parenting style / children-rearing style 育儿方式</p>
<ol>
<li><p>两种家长 </p>
<ul>
<li>authoritarian parents 专制、强势的家长</li>
<li>expect their children to do exactly what they are told 期待孩子完全按照被要求地去做</li>
<li>stifle their creativity 压制孩子们的创造力</li>
<li>damage their self-confidence 打击他们的自信心</li>
</ul>
<hr>
<ul>
<li>permissive parents 过于放纵的家长</li>
<li>spoil their children 溺爱孩子</li>
<li>behave badly （孩子）表现不好</li>
<li>behave as they please (孩子) 随心所欲地行事</li>
</ul>
</li>
<li><p>正确的育儿方式</p>
<ul>
<li>are understanding and supportive 理解并支持孩子</li>
<li>respect their feelings 尊重他们的感受</li>
<li>support their choices 支持他们的选择</li>
<li>respect their individuality 尊重他们的个性</li>
<li>give them advice and support 为他们提供建议和支持</li>
<li>encourage them to think independently 鼓励他们去独立思考</li>
<li>help them build self-confidence 帮助他们树立自信</li>
<li>help them achieve their potential 帮助他们发挥出自己的潜力</li>
</ul>
</li>
</ol>
</li>
<li><p>Emotional health / emotional well-being 心理健康</p>
<ul>
<li>provide them with emotional support (家长)为孩子提供心理与情感上的支持</li>
<li>(孩子)向家长需求建议</li>
<li>对于他们的心理健康有害</li>
</ul>
</li>
<li><p>develop good moral values 形成良好的道德观念</p>
<ul>
<li>teach children about social responsibility (老师或家长)让孩子懂得自己的社会责任</li>
<li>教孩子明辨是非</li>
</ul>
</li>
<li><p>good behaviour 良好的行为 </p>
<ul>
<li>follow school rules 遵循学校的规定</li>
<li>develop self-control 发展自我约束力</li>
<li>develop self-discipline 发展自制力</li>
<li>well-behaved students 行为表现良好的学生</li>
<li>teach them good manners and etiquette 教给他们良好的举止和礼仪</li>
<li>break school rules 违反学校规定</li>
</ul>
</li>
<li><p>their peers 他们的同龄人</p>
<ul>
<li>peer pressure 来自同龄人的压力</li>
<li>are in their formative years 还处在性格的形成的阶段</li>
<li>often act on implus 时常会冲动地行事<ul>
<li>Teenagers often act on impulse and get into trouble with their parents. </li>
</ul>
</li>
<li>are influenced by peer pressure 受到同龄人的影响 <ul>
<li>positive peer pressure</li>
<li>negative peer pressure  - drug abuse , - school bullying , - youth crime</li>
</ul>
</li>
<li>feel lonely and isolated 感到孤独而且被孤立</li>
</ul>
</li>
<li><p>behaviour problems / behavioural problems 行为问题</p>
<ul>
<li><p>unruly students / disruptive students 不守纪律的学生</p>
</li>
<li><p>drop out of school 辍学</p>
<ul>
<li>Half of yound adults who dropped out of school regretted their decision later.</li>
</ul>
</li>
<li><p>are involved wih gangs and crime 参与帮派和犯罪活动</p>
</li>
</ul>
<hr>
<p>  are responsibility for their actions 对他们的行为负责</p>
<ul>
<li>have respect for their neighbours and communities 尊重他们的邻居和社区</li>
</ul>
</li>
<li><p>youth crime / juvenile delinquency 青少年犯罪</p>
<ul>
<li>lack self-control 缺乏自制力</li>
<li>do not think about the consequences of their actions (青少年)不考虑自己行为的结果</li>
<li>commit a crime / commit crimes 犯罪</li>
<li>reduce / prevent youth crime减少/预防青少年犯罪</li>
<li>become law-abiding citizens 成为守法公民</li>
<li>become useful members of society 成为有用的社会成员</li>
</ul>
</li>
<li><p>prepare them well for adult life 帮助他们成年之后的人生做好准备</p>
<ul>
<li>increase their independence 增强他们的独立性</li>
<li>develope a positive outlook on life 形成积极的人生态度</li>
<li>a responsible member of society 有责任感的社会成员</li>
<li>a productive / contributing member of society 能为社会创造有用价值/做出贡献的社会成员</li>
</ul>
</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/24/JavaUtil/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="TianyLi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://oo9y7ylu4.bkt.clouddn.com/image/blog/headIcon/IMG_7483.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ty_Isaac">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/24/JavaUtil/" itemprop="url">
                  JavaUtil
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-24T09:04:16+08:00">
                2017-08-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index">
                    <span itemprop="name">编程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/08/24/JavaUtil/" class="leancloud_visitors" data-flag-title="JavaUtil">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Directory"><a href="#Directory" class="headerlink" title="Directory"></a>Directory</h1><h2 id="instruction"><a href="#instruction" class="headerlink" title="instruction"></a>instruction</h2><p>程序设计中一项常见的任务就是在文件集上执行操作，这些文件要么在本地目录中，要么遍布于整个目录树中。如果有一种工具能产生整个文件集，将会非常节省时间。下面的实用工具类就可以通过使用 $local()$ 方法由本地目录的文件构成的 File 对象组，或者通过 $walk()$ 方法产生给定目录下的由整个目录树中所有文件构成的 List\<file> ( File 对象比文件更有用，因为 File 包含更多的信息)。这些文件是基于你提供的正则表达式而被选中的</file></p>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> categoryUtil;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FilenameFilter;</div><div class="line"><span class="keyword">import</span> java.util.ArrayList;</div><div class="line"><span class="keyword">import</span> java.util.Iterator;</div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"><span class="keyword">import</span> java.util.regex.Pattern;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by isaac on 2017/8/24.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Directory</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> File[] local(File dir,<span class="keyword">final</span> String regex)&#123;</div><div class="line">        <span class="keyword">return</span> dir.listFiles(<span class="keyword">new</span> FilenameFilter() &#123;</div><div class="line">            <span class="keyword">private</span> Pattern pattern = Pattern.compile(regex);</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">accept</span><span class="params">(File dir, String name)</span> </span>&#123;</div><div class="line">                <span class="keyword">return</span> pattern.matcher(<span class="keyword">new</span> File(name).getName()).matches();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> File[] local(String path,<span class="keyword">final</span> String regex)&#123;</div><div class="line">        <span class="comment">//Override</span></div><div class="line">        <span class="keyword">return</span> local(<span class="keyword">new</span> File(path),regex);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//A two-tuple for returning a pair of objects:</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeInfo</span> <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">File</span>&gt;</span>&#123;</div><div class="line">        <span class="keyword">public</span> List&lt;File&gt; files = <span class="keyword">new</span> ArrayList&lt;File&gt;();</div><div class="line">        <span class="keyword">public</span> List&lt;File&gt; dirs = <span class="keyword">new</span> ArrayList&lt;File&gt;();</div><div class="line"></div><div class="line">        <span class="comment">//The default iterable elements is the file list:</span></div><div class="line">        <span class="function"><span class="keyword">public</span> Iterator&lt;File&gt; <span class="title">iterator</span><span class="params">()</span></span>&#123;</div><div class="line">            <span class="keyword">return</span> files.iterator();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">addAll</span><span class="params">(TreeInfo other)</span></span>&#123;</div><div class="line">            files.addAll(other.files);</div><div class="line">            dirs.addAll(other.dirs);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">"dirs : "</span> + PPrint.pformat(dirs) +</div><div class="line">                    <span class="string">"\n\n files : "</span> + PPrint.pformat(files);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TreeInfo <span class="title">walk</span><span class="params">(String start,String regex)</span></span>&#123;</div><div class="line">        <span class="comment">//Begin recursion</span></div><div class="line">        <span class="keyword">return</span> recurseDirs(<span class="keyword">new</span> File(start),regex);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TreeInfo <span class="title">walk</span><span class="params">(File start,String regex)</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> recurseDirs(start,regex);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TreeInfo <span class="title">walk</span><span class="params">(File start)</span></span>&#123;</div><div class="line">        <span class="comment">//Everything</span></div><div class="line">        <span class="keyword">return</span> recurseDirs(start,<span class="string">".*"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TreeInfo <span class="title">walk</span><span class="params">(String start)</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> recurseDirs(<span class="keyword">new</span> File(start),<span class="string">".*"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">static</span> TreeInfo <span class="title">recurseDirs</span><span class="params">(File startDir,String regex)</span></span>&#123;</div><div class="line">        TreeInfo result = <span class="keyword">new</span> TreeInfo();</div><div class="line">        <span class="keyword">for</span>(File item : startDir.listFiles())&#123;</div><div class="line">            <span class="keyword">if</span>(item.isDirectory())&#123;</div><div class="line">                result.dirs.add(item);</div><div class="line">                result.addAll(recurseDirs(item,regex));</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(item.getName().matches(regex))&#123;</div><div class="line">                result.files.add(item);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Testify"><a href="#Testify" class="headerlink" title="Testify"></a>Testify</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">  <span class="keyword">if</span>(args.length==<span class="number">0</span>)</div><div class="line">    System.out.println(walk(<span class="string">"."</span>));</div><div class="line">  <span class="keyword">else</span></div><div class="line">    <span class="keyword">for</span>(String arg : agrs)</div><div class="line">      System.out.println(walk(arg));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Pretty-Print"><a href="#Pretty-Print" class="headerlink" title="Pretty Print"></a>Pretty Print</h1><h2 id="Instrcution"><a href="#Instrcution" class="headerlink" title="Instrcution"></a>Instrcution</h2><p>容器默认的toString方法会在单个行中打印容器中的所有元素，对于大型集合来说，这会变得难以阅读，本工具可替换其格式。添加新行并缩排所有的元素的工具</p>
<h2 id="Code-1"><a href="#Code-1" class="headerlink" title="Code"></a>Code</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> categoryUtil;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.*;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by isaac on 2017/8/24.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PPrint</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">pformat</span><span class="params">(Collection&lt;?&gt; c)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(c.size() == <span class="number">0</span>) <span class="keyword">return</span> <span class="string">"[]"</span>;</div><div class="line">        StringBuffer result = <span class="keyword">new</span> StringBuffer(<span class="string">" [ "</span>);</div><div class="line">        <span class="keyword">for</span>(Object elem : c)&#123;</div><div class="line">            <span class="keyword">if</span>(c.size() != <span class="number">1</span>)</div><div class="line">                result.append(<span class="string">"\n  "</span>);</div><div class="line">            result.append(elem);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span>(c.size()==<span class="number">1</span>)</div><div class="line">            result.append(<span class="string">"\n"</span>);</div><div class="line">        result.append(<span class="string">" ] "</span>);</div><div class="line">        <span class="keyword">return</span> result.toString();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">pprint</span><span class="params">(Collection&lt;?&gt; c)</span></span>&#123;</div><div class="line">        System.out.println(pformat(c));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">pprint</span><span class="params">(Object[] c)</span></span>&#123;</div><div class="line">        System.out.println(Arrays.asList(c));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/23/HibernateStudy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="TianyLi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://oo9y7ylu4.bkt.clouddn.com/image/blog/headIcon/IMG_7483.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ty_Isaac">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/23/HibernateStudy/" itemprop="url">
                  Hibernate Study
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-23T15:55:58+08:00">
                2017-08-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index">
                    <span itemprop="name">编程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/08/23/HibernateStudy/" class="leancloud_visitors" data-flag-title="Hibernate Study">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Hibernate入门"><a href="#Hibernate入门" class="headerlink" title="Hibernate入门"></a>Hibernate入门</h1><h2 id="搭建hibernate环境"><a href="#搭建hibernate环境" class="headerlink" title="搭建hibernate环境"></a>搭建hibernate环境</h2><h4 id="第一步-导入hibernate的jar包"><a href="#第一步-导入hibernate的jar包" class="headerlink" title="第一步 导入hibernate的jar包"></a>第一步 导入hibernate的jar包</h4><ol>
<li>hibernate 文件中的required中的jar包要导入</li>
<li>jpa 中的 jar 包</li>
<li>因为使用 hibernate 时候，会有日志信息输出。hibernate 本身没有日志输出 jar 包，导入其他日志jar包</li>
<li>mysql驱动 jar 包</li>
</ol>
<h4 id="第二步-创建实体类"><a href="#第二步-创建实体类" class="headerlink" title="第二步 创建实体类"></a>第二步 创建实体类</h4><p>hibernate要求实体类中有一个属性是唯一的</p>
<h4 id="第三步-配置实体类和数据库表一一对应关系（映射关系）"><a href="#第三步-配置实体类和数据库表一一对应关系（映射关系）" class="headerlink" title="第三步  配置实体类和数据库表一一对应关系（映射关系）"></a>第三步  配置实体类和数据库表一一对应关系（映射关系）</h4><p>使用配置文件实现映射关系</p>
<ol>
<li>创建xml格式的配置文件<ul>
<li>映射配置文件和位置没有固定要求</li>
<li>建议：<strong>在实体类所在包里面创建，\<classname>.hbm.xml</classname></strong></li>
</ul>
</li>
<li>配置是xml格式，在配置文件中首先引入 xml 约束<ul>
<li>学过约束 dtd 、 schema 在hibernate 都是 dtd文件</li>
</ul>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE hibernate-mapping PUBLIC</div><div class="line">        &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</div><div class="line">        &quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;</div></pre></td></tr></table></figure>
<p>完整的配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"></div><div class="line"><span class="meta">&lt;!DOCTYPE hibernate-mapping PUBLIC</span></div><div class="line">        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"</div><div class="line">        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd"&gt;</div><div class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 1. 配置类和表对应</span></div><div class="line">            class 标签</div><div class="line">            name 属性： 实体类全路径</div><div class="line">            table 属性： 数据库表名称</div><div class="line">    --&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"User.User"</span> <span class="attr">table</span>=<span class="string">"t_user"</span> &gt;</span></div><div class="line">        <span class="comment">&lt;!-- 2. 配置实体类 id 和 表 id 对应</span></div><div class="line">                hibernate 要求在实体类有一个属性唯一值</div><div class="line">                hibernate 要求表有字段作为唯一值</div><div class="line">        --&gt;</div><div class="line">        <span class="comment">&lt;!-- id 标签</span></div><div class="line">                name属性: 实体类里面id属性名称</div><div class="line">                column属性: 生成的表字段名称</div><div class="line">        --&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"uid"</span> <span class="attr">column</span>=<span class="string">"uid"</span>&gt;</span></div><div class="line">            <span class="comment">&lt;!-- 设置数据库表id增长策略</span></div><div class="line">                 native: 生成id值主键自动增长--&gt;</div><div class="line">            <span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"native"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!--配置其他的属性和表字段对应</span></div><div class="line">            name属性: 实体类属性名称</div><div class="line">            column属性: 生成表的字段名</div><div class="line">        --&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">column</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">column</span>=<span class="string">"password"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"address"</span> <span class="attr">column</span>=<span class="string">"address"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>映射文件是一个以 \<hibernate-mapping> 为根元素的 XML 文件，里面包含所有 \<class> 标签</class></hibernate-mapping></li>
<li>\<class>标签是用来定义从一个 Java 类到数据库表的特定映射。Java 的类名使用 <strong>name</strong> 属性表示，数据库表名用<strong>table</strong>属性表示</class></li>
<li>\<meta> 标签是一个可选元素，被用来修饰类</li>
<li>\<id> 标签将类中的唯一属性与数据库表中主键关联。id 元素中的 <strong>name</strong> 属性引用类的性质， <strong>column</strong> 属性引用数据库表的列。 <strong>type</strong> 属性保存 hibernate 映射的类型，这个类型会将从 Java 转换成 SQL 数据类型</id></li>
<li>\<id> 标签下的\<generator> 标签用来自动生成主键值。设置 generator 标签中的 <strong>class</strong> 属性可以设置 <strong>native</strong></generator></id></li>
<li>\<property> 标签将Java 类的属性与数据库表的列匹配。标签中 <strong>name</strong> 属性引用的是类的元素，<strong>column</strong>属性引用的是数据库表的列。 <strong>type</strong> 属性保存Hibernate映射的类型，这个类型会将从Java转换为SQL数据类型</property></li>
</ul>
<h4 id="第四步-创建hibernate的核心配置文件"><a href="#第四步-创建hibernate的核心配置文件" class="headerlink" title="第四步  创建hibernate的核心配置文件"></a>第四步  创建hibernate的核心配置文件</h4><ol>
<li><p>核心配置文件格式 xml ，但是核心配置文件名称和位置式固定的</p>
<ul>
<li>位置：必须 src 下面</li>
<li>名称：必须hibernate.cfg.xml</li>
</ul>
</li>
<li><p>引入dtd约束</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE hibernate-configuration PUBLIC</div><div class="line">        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;</div><div class="line">        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>hibernate操作过程中，只会加载核心配置文件，其他配置文件不会进行加载</p>
</li>
</ol>
<h5 id="第一部分-配置数据库信息"><a href="#第一部分-配置数据库信息" class="headerlink" title="第一部分 配置数据库信息"></a>第一部分 配置数据库信息</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--第一部分：配置数据库信息--&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.driver_class"</span> &gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql:///hibernate_day01<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.username"</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.password"</span>&gt;</span>YourPassword<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div></pre></td></tr></table></figure>
<h5 id="第二部分-配置hibernate信息"><a href="#第二部分-配置hibernate信息" class="headerlink" title="第二部分 配置hibernate信息"></a>第二部分 配置hibernate信息</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--第二部分：配置hibernate信息 (可选的)--&gt;</span></div><div class="line">   <span class="comment">&lt;!--输出低层sql语句--&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.show_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">   <span class="comment">&lt;!--输出低层sql语句格式--&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.format_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">   <span class="comment">&lt;!--hibernate帮创建表，需要配置之后</span></div><div class="line">       update: 如果已经有表，更新，如果没有，创建</div><div class="line">   --&gt;</div><div class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">   <span class="comment">&lt;!-- 配置数据库方言，数据库中特有的设置关键字--&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.Mysql<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div></pre></td></tr></table></figure>
<h5 id="第三部分-把映射文件放到核心配置文件中"><a href="#第三部分-把映射文件放到核心配置文件中" class="headerlink" title="第三部分 把映射文件放到核心配置文件中"></a>第三部分 把映射文件放到核心配置文件中</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--第三部分：把映射文件放到配置文件中--&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>=<span class="string">"User/User.hbm.xml"</span> /&gt;</span></div></pre></td></tr></table></figure>
<p>注意路径中文件的位置，与当前的核心配置文件的相对路径</p>
<h2 id="实现添加操作"><a href="#实现添加操作" class="headerlink" title="实现添加操作"></a>实现添加操作</h2><h4 id="第一步-加载hibernate核心配置文件"><a href="#第一步-加载hibernate核心配置文件" class="headerlink" title="第一步 加载hibernate核心配置文件"></a>第一步 加载hibernate核心配置文件</h4><h4 id="第二步-创建SessionFactory对象"><a href="#第二步-创建SessionFactory对象" class="headerlink" title="第二步 创建SessionFactory对象"></a>第二步 创建SessionFactory对象</h4><h4 id="第三步-使用SessionFactory-创建Session对象"><a href="#第三步-使用SessionFactory-创建Session对象" class="headerlink" title="第三步 使用SessionFactory 创建Session对象"></a>第三步 使用SessionFactory 创建Session对象</h4><h4 id="第四步-开启事务"><a href="#第四步-开启事务" class="headerlink" title="第四步 开启事务"></a>第四步 开启事务</h4><h4 id="第五步-写具体逻辑-crud操作"><a href="#第五步-写具体逻辑-crud操作" class="headerlink" title="第五步 写具体逻辑 crud操作"></a>第五步 写具体逻辑 crud操作</h4><h4 id="第六步-提交事务"><a href="#第六步-提交事务" class="headerlink" title="第六步 提交事务"></a>第六步 提交事务</h4><h4 id="第七步-关闭资源"><a href="#第七步-关闭资源" class="headerlink" title="第七步 关闭资源"></a>第七步 关闭资源</h4><p>测试文件，使用单元测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> hibernateTest;</div><div class="line"></div><div class="line"><span class="keyword">import</span> User.User;</div><div class="line"><span class="keyword">import</span> org.hibernate.Session;</div><div class="line"><span class="keyword">import</span> org.hibernate.SessionFactory;</div><div class="line"><span class="keyword">import</span> org.hibernate.Transaction;</div><div class="line"><span class="keyword">import</span> org.hibernate.cfg.Configuration;</div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by isaac on 2017/9/3.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HibernateDemo</span> </span>&#123;</div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">TestADD</span><span class="params">()</span></span>&#123;</div><div class="line"><span class="comment">//    第一步 加载hibernate核心配置文件</span></div><div class="line">        <span class="comment">//在src下面找到名称是hibernate.cfg.xml</span></div><div class="line">        <span class="comment">//在hibernate里面封装对象</span></div><div class="line">        Configuration cfg = <span class="keyword">new</span> Configuration();</div><div class="line">        cfg.configure();</div><div class="line"><span class="comment">//    第二步 创建SessionFactory对象</span></div><div class="line">        <span class="comment">//读取hibernate中核心配置文件内容，创建sessionFactory</span></div><div class="line">        <span class="comment">//在此过程中，根据映射关系，在配置数据库里面把表创建</span></div><div class="line">        SessionFactory sessionFactory = cfg.buildSessionFactory();</div><div class="line"><span class="comment">//    第三步 使用SessionFactory 创建Session对象</span></div><div class="line">        <span class="comment">//类似于连接</span></div><div class="line">        Session session = sessionFactory.openSession();</div><div class="line"><span class="comment">//    第四步 开启事务</span></div><div class="line">        Transaction tx = session.beginTransaction();</div><div class="line"><span class="comment">//    第五步 写具体逻辑 crud操作</span></div><div class="line">        User user = <span class="keyword">new</span> User();</div><div class="line">        user.setUsername(<span class="string">"Isaac"</span>);</div><div class="line">        user.setPassword(<span class="string">"10086"</span>);</div><div class="line">        user.setAddress(<span class="string">"China"</span>);</div><div class="line">        <span class="comment">//调用session方法实现添加</span></div><div class="line">        session.save(user);</div><div class="line"><span class="comment">//    第六步 提交事务</span></div><div class="line">        tx.commit();</div><div class="line"><span class="comment">//    第七步 关闭资源</span></div><div class="line">        session.close();</div><div class="line">        sessionFactory.close();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Hibernate配置文件详解"><a href="#Hibernate配置文件详解" class="headerlink" title="Hibernate配置文件详解"></a>Hibernate配置文件详解</h1><h2 id="Hibernate映射配置文件"><a href="#Hibernate映射配置文件" class="headerlink" title="Hibernate映射配置文件"></a>Hibernate映射配置文件</h2><ol>
<li>映射配置文件名称和位置没有固定要求</li>
<li>映射配置文件中，标签name属性值写实体相关内容<ul>
<li>class 标签 name 属性值实体类全路径</li>
<li>id 标签和 property 标签 name 属性值 实体属性值</li>
</ul>
</li>
<li>id 标签和 property标签，column属性可以省略<ul>
<li>不写值，column和name属性值一样</li>
</ul>
</li>
<li>property标签type属性设置生成字段类型</li>
</ol>
<h2 id="Hibernate核心配置文件"><a href="#Hibernate核心配置文件" class="headerlink" title="Hibernate核心配置文件"></a>Hibernate核心配置文件</h2><ol>
<li>配置写位置要求 ，在session-factory下</li>
<li>配置三部分要求<ul>
<li>数据库部分必须</li>
<li>hibernate部分可选的</li>
<li>映射文件必须的</li>
</ul>
</li>
<li>核心配置文件名称和位置固定的<ul>
<li>位置：src下面</li>
<li>名称：hibernate.cfg.xml</li>
</ul>
</li>
</ol>
<h1 id="Hibernate核心API"><a href="#Hibernate核心API" class="headerlink" title="Hibernate核心API"></a>Hibernate核心API</h1><h2 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h2><ol>
<li><p>代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Configuration cfg = <span class="keyword">new</span> Configuration();</div><div class="line">   cfg.configure();</div></pre></td></tr></table></figure>
</li>
<li><p>到src下面找到名称hibernate.cfg.xml配置文件，创建对象，把配置文件放到对象里面（加载核心配置文件）</p>
</li>
</ol>
<h2 id="SessionFactory（重点）"><a href="#SessionFactory（重点）" class="headerlink" title="SessionFactory（重点）"></a>SessionFactory（重点）</h2><ol>
<li><p>使用configuration对象创建SessionFactory对象</p>
<ol>
<li><p>创建SessionFactory过程中坐的事情：</p>
<ul>
<li><p>根据核心配置文件中，有数据库配置，有文件映射部分，到数据库里面根据映射关系把表创</p>
</li>
<li><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
</li>
<li><p>创建sessionFactory过程中，整个过程特别消耗资源</p>
<ol>
<li>在Hibernate操作中，建议一个项目一般创建一个SessionFactory对象</li>
</ol>
</li>
<li><p>具体实现</p>
<ol>
<li><p>写工具类，写静态代码块实现</p>
<p>静态代码块在类加载时候执行，执行一次</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HibernateUtils</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Configuration cfg = <span class="keyword">null</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SessionFactory sessionFactory = <span class="keyword">null</span>;</div><div class="line">    <span class="keyword">static</span> &#123;</div><div class="line">        cfg = <span class="keyword">new</span> Configuration();</div><div class="line">        cfg.configure();</div><div class="line">        sessionFactory = cfg.buildSessionFactory();</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SessionFactory <span class="title">getSessionFactory</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> sessionFactory;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<h2 id="Session-重点"><a href="#Session-重点" class="headerlink" title="Session(重点)"></a>Session(重点)</h2><ol>
<li>Session 类似于 JDBC 中connection</li>
<li>调用session里不同的方法实现 crud 操作<ul>
<li>添加 save()</li>
<li>修改 update()</li>
<li>删除 delelte()</li>
<li>根据 id 查询 get()</li>
</ul>
</li>
<li>session对象单线程对象<ul>
<li>session对象不能共用，只能自己使用</li>
</ul>
</li>
</ol>
<h2 id="Transaction"><a href="#Transaction" class="headerlink" title="Transaction"></a>Transaction</h2><ol>
<li><p>事务对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Transaction tx = session.beginTransaction();</div></pre></td></tr></table></figure>
</li>
<li><p>事务提交和回滚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">tx.commit();</div><div class="line">tx.rollback();</div></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="实体类编写规则"><a href="#实体类编写规则" class="headerlink" title="实体类编写规则"></a>实体类编写规则</h1><ol>
<li><p>实体类里面属性私有的</p>
</li>
<li><p>私有属性使用公开的 set 和 get 方法</p>
</li>
<li><p>要求实体属性有唯一值(一般使用id值)</p>
</li>
<li><p>实体类属性建议不使用基本数据类型，使用基本数据类型对应的包装类</p>
<ol>
<li>八个基本数据类型对应的包装类<ul>
<li>int - Integer</li>
<li>char - Character</li>
<li>其他的都是首字母大写 比如 double - Double</li>
</ul>
</li>
<li>比如 表示学生分数，假如 int score<ul>
<li>学生得了 0 分 ， int score = 0 ；</li>
<li>学生没参加考试 ， int score = 0；不能准确表示学生是否参加考试</li>
</ul>
</li>
</ol>
<p>解决：使用包装类就可以，Integer score = 0, 表示学生得了 0 分；Integer score = null 表示学生没有参加考试</p>
</li>
</ol>
<h1 id="主键生成规则"><a href="#主键生成规则" class="headerlink" title="主键生成规则"></a>主键生成规则</h1><h1 id="实体类crud操作"><a href="#实体类crud操作" class="headerlink" title="实体类crud操作"></a>实体类crud操作</h1><h3 id="添加操作"><a href="#添加操作" class="headerlink" title="添加操作"></a>添加操作</h3><ol>
<li><p>调用session里面的save方法实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">User user = <span class="keyword">new</span> User();</div><div class="line">user.setUsername(<span class="string">"小马"</span>);</div><div class="line">user.setPassword(<span class="string">"10080"</span>);</div><div class="line">user.setAddress(<span class="string">"Panda"</span>);</div><div class="line"><span class="comment">//调用session方法实现添加</span></div><div class="line">session.save(user);</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="根据id进行操作"><a href="#根据id进行操作" class="headerlink" title="根据id进行操作"></a>根据id进行操作</h3><ol>
<li><p>调用session里面的get方法实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//第一个参数：实体类的class</span></div><div class="line"><span class="comment">//第二个参数：id值</span></div><div class="line"> User user = session.get(User.class,<span class="number">1</span>);</div><div class="line"> System.out.println(user);</div></pre></td></tr></table></figure>
</li>
<li><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span></div><div class="line">        user0_.uid <span class="keyword">as</span> uid1_0_0_,</div><div class="line">        user0_.username <span class="keyword">as</span> username2_0_0_,</div><div class="line">        user0_.password <span class="keyword">as</span> password3_0_0_,</div><div class="line">        user0_.address <span class="keyword">as</span> address4_0_0_ </div><div class="line">    <span class="keyword">from</span></div><div class="line">        t_user user0_ </div><div class="line">    <span class="keyword">where</span></div><div class="line">        user0_.uid=?</div></pre></td></tr></table></figure>
<p>执行结果如上</p>
</li>
</ol>
<h3 id="修改操作"><a href="#修改操作" class="headerlink" title="修改操作"></a>修改操作</h3><p>首先查询，再修改值</p>
<ol>
<li>根据 id 查询，返回对象</li>
<li>根据uid修改对象</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//根据 id 查询</span></div><div class="line">User user = session.get(User.class,<span class="number">2</span>);</div><div class="line"><span class="comment">//向返回的user对象里面设置修改以后的值</span></div><div class="line">user.setUsername(<span class="string">"Utoly"</span>);</div><div class="line"><span class="comment">//调用session方法修改</span></div><div class="line"><span class="comment">//执行过程：到user对象中，找到Uid值，根据uid进行修改</span></div><div class="line">session.update(user);</div></pre></td></tr></table></figure>
<h3 id="删除操作"><a href="#删除操作" class="headerlink" title="删除操作"></a>删除操作</h3><p>调用session里面 delete方法实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//第一种 根据id查询对象</span></div><div class="line">User user = session.get(User.class,<span class="number">2</span>);</div><div class="line">session.delete(user);</div><div class="line"><span class="comment">//第二种</span></div><div class="line">User user1 = <span class="keyword">new</span> User();</div><div class="line">user1.setUid(<span class="number">1</span>);</div><div class="line">session.delete(user1);</div></pre></td></tr></table></figure>
<h1 id="实体类对象状态（概念）"><a href="#实体类对象状态（概念）" class="headerlink" title="实体类对象状态（概念）"></a>实体类对象状态（概念）</h1><ol>
<li>实体类对象有三种<ol>
<li>瞬时态：对象里面没有 id 值，对象与 session 也没有关系</li>
<li>持久态：对象里面有 id  值，对象与session 有关联</li>
<li>托管态：对象有 id 值，对象与 sessinon 没有关联</li>
</ol>
</li>
<li>演示操作实体类对象的方法<ol>
<li>saveOrUpdate 方法：实现添加、修改</li>
</ol>
</li>
</ol>
<h1 id="Hibernate的一级缓存"><a href="#Hibernate的一级缓存" class="headerlink" title="Hibernate的一级缓存"></a>Hibernate的一级缓存</h1><h2 id="什么是缓存"><a href="#什么是缓存" class="headerlink" title="什么是缓存"></a>什么是缓存</h2><p> 数据存到数据库里面，数据库本身是文件系统，使用流方式操作文件效率不高</p>
<ul>
<li>把数据存到内存中，不需要使用流方式，可以直接读取内存中数据</li>
<li>把数据放到内存中，提供读取效率</li>
</ul>
<h2 id="Hibernate缓存"><a href="#Hibernate缓存" class="headerlink" title="Hibernate缓存"></a>Hibernate缓存</h2><ol>
<li>hibernate框架中提供很多优化方式，hibernate的缓存就是一个优化方式</li>
<li>hibernate缓存特点：<ol>
<li>hibernate的一级缓存<ul>
<li>hibernate 的一级缓存默认打开</li>
<li>hibernate 的一级缓存使用范围，是 session 范围，从 session 创建到session关闭</li>
<li>hibernate的一级缓存中，存储数据必须 持久态数据</li>
</ul>
</li>
<li>hibernate的二级缓存<ul>
<li>目前已经不使用了，替代技术 redis </li>
<li>二级缓存默认不是打开的，需要配置</li>
<li>二级缓存使用范围，是 SessionFactory 范围</li>
</ul>
</li>
</ol>
</li>
<li>验证一级缓存存在</li>
</ol>
<h1 id="Hibernate-绑定-session"><a href="#Hibernate-绑定-session" class="headerlink" title="Hibernate 绑定 session"></a>Hibernate 绑定 session</h1><ol>
<li><p>在hibernate核心配置文件中配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.current_session_context_class"</span>&gt;</span>thread<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div></pre></td></tr></table></figure>
<p>​</p>
</li>
<li><p>调用sessionFactory里面的方法得到</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//提供返回与本地线程绑定的session的方法</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Session <span class="title">getSession</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> sessionFactory.getCurrentSession();</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="Hibernate的-API-使用"><a href="#Hibernate的-API-使用" class="headerlink" title="Hibernate的 API 使用"></a>Hibernate的 API 使用</h1><h2 id="Query-对象"><a href="#Query-对象" class="headerlink" title="Query 对象"></a>Query 对象</h2><ol>
<li>使用query对象，不需要写 sql 语句，但是写 hql 语句<ul>
<li>hql: hibernate query language , hibernatenate 提供查询语句，这个hql语句与普通SQL语句很相似</li>
<li>hql 与 sql 的区别：<ul>
<li>使用 sql 操作表和表字段</li>
<li>使用 hql 操作实体类和属性</li>
</ul>
</li>
</ul>
</li>
</ol>
<ol>
<li><p>查询所有 hql 语句：</p>
<p>from 实体类名称</p>
</li>
<li><p>Query 对象使用</p>
<ol>
<li>创建 query 对象</li>
<li>调用 query 对象里面的方法</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1. 创建query对象</span></div><div class="line"><span class="comment">//方法里写hql语句</span></div><div class="line">Query query = session.createQuery(<span class="string">"from User"</span>);</div><div class="line"><span class="comment">//2. 调用query对象的方法得到结果</span></div><div class="line">List&lt;User&gt; list = query.list();</div><div class="line"><span class="keyword">for</span>(User user:list)&#123;</div><div class="line">  System.out.println(user);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>​</p>
</li>
</ol>
<h2 id="Criteria-对象"><a href="#Criteria-对象" class="headerlink" title="Criteria 对象"></a>Criteria 对象</h2><ol>
<li><p>这个对象查询操作，但是使用这个对象时候，不需要写语句，直接调用方法实现。</p>
</li>
<li><p>实现过程</p>
<ul>
<li>创建 criteria 对象</li>
<li>调用方法得到结果</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1.创建criteria对象</span></div><div class="line">Criteria criteria = session.createCriteria(User.class);</div><div class="line"><span class="comment">//2.调用方法得到结果</span></div><div class="line">List&lt;User&gt; list = criteria.list();</div><div class="line"><span class="keyword">for</span>(User user : list)&#123;</div><div class="line">   System.out.println(user);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>​</p>
</li>
</ol>
<h2 id="SQL-Query-对象"><a href="#SQL-Query-对象" class="headerlink" title="SQL Query 对象"></a>SQL Query 对象</h2><ol>
<li><p>使用 hibernate 时候，调用低层 sql 实现</p>
</li>
<li><p>实现过程</p>
<ul>
<li>创建对象</li>
<li>调用对象的方法得到结果</li>
<li>返回list集合每部分是数组</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1.创建对象</span></div><div class="line">SQLQuery sqlQuery = session.createSQLQuery(<span class="string">"select * from t_user"</span>);</div><div class="line">List&lt;Object[]&gt; list = sqlQuery.list();</div><div class="line"><span class="comment">//返回每部分都是数组</span></div><div class="line"><span class="keyword">for</span>(Object[] objects:list)&#123;</div><div class="line">   System.out.println(Arrays.toString(objects));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>返回list中每部分是对象形式</li>
</ul>
</li>
</ol>
<h1 id="表与表之间关系回顾"><a href="#表与表之间关系回顾" class="headerlink" title="表与表之间关系回顾"></a>表与表之间关系回顾</h1><h2 id="一对多"><a href="#一对多" class="headerlink" title="一对多"></a>一对多</h2><ul>
<li>分类和商品关系，一个分类里有多个商品，一个商品只有一个分类</li>
<li>客户和联系人是一对多关系<ul>
<li>客户：与公司有业务往来，百度、新浪、360…</li>
<li>联系人：</li>
</ul>
</li>
</ul>
<h2 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h2><ul>
<li>订单和商品，一个订单里有多个商品，一个商品可以属于多个订单</li>
<li>用户和角色多对多关系<ul>
<li>用户：小王、小马、小宋</li>
<li>角色：总经理、秘书、司机、保安</li>
<li>一个用户可以有多个角色，一个角色有多个用户</li>
</ul>
</li>
</ul>
<h2 id="一对一"><a href="#一对一" class="headerlink" title="一对一"></a>一对一</h2><h1 id="Hibernate的一对多操作（重点）"><a href="#Hibernate的一对多操作（重点）" class="headerlink" title="Hibernate的一对多操作（重点）"></a>Hibernate的一对多操作（重点）</h1><h2 id="一对多映射配置"><a href="#一对多映射配置" class="headerlink" title="一对多映射配置"></a>一对多映射配置</h2><p>以客户和联系人为例，客户是一，联系人是多</p>
<h3 id="第一步-创建实体类"><a href="#第一步-创建实体类" class="headerlink" title="第一步 创建实体类"></a>第一步 创建实体类</h3><h3 id="第二步-让两个实体类之间相互表示"><a href="#第二步-让两个实体类之间相互表示" class="headerlink" title="第二步 让两个实体类之间相互表示"></a>第二步 让两个实体类之间相互表示</h3><ol>
<li>在客户实体类里面表示多个联系人<ul>
<li>一个客户里面有多个联系人 </li>
<li>Hibernate要求使用集合表示多的数据 set</li>
</ul>
</li>
<li>在联系人实体类里面表示所属客户</li>
</ol>
<h3 id="第三步-配置映射关系"><a href="#第三步-配置映射关系" class="headerlink" title="第三步 配置映射关系"></a>第三步 配置映射关系</h3><p>在客户映射文件中，表示所有联系人</p>
<p>使用 set 标签表示所有联系人</p>
<p>set标签里面有name属性，属性值写在客户实体类里面表示联系人的 set 集合名称</p>
<h2 id="一对多级联操作"><a href="#一对多级联操作" class="headerlink" title="一对多级联操作"></a>一对多级联操作</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/12/编程训练/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="TianyLi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://oo9y7ylu4.bkt.clouddn.com/image/blog/headIcon/IMG_7483.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ty_Isaac">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/12/编程训练/" itemprop="url">
                  编程训练
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-12T18:03:13+08:00">
                2017-07-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index">
                    <span itemprop="name">编程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/07/12/编程训练/" class="leancloud_visitors" data-flag-title="编程训练">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="二叉树的深度"><a href="#二叉树的深度" class="headerlink" title="二叉树的深度"></a>二叉树的深度</h1><h2 id="Instruction"><a href="#Instruction" class="headerlink" title="Instruction"></a>Instruction</h2><p>Given a binary tree, find its minimum depth. The minimum depth is the number of nodes along the shortest path from the root node down to the nearest leaf node.</p>
<p>Definition for binary tree</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span> </span>&#123;</div><div class="line">   <span class="keyword">int</span> val;</div><div class="line">   TreeNode left;</div><div class="line">   TreeNode right;</div><div class="line">	TreeNode(<span class="keyword">int</span> x) &#123; val = x; &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Answer-to-the-question"><a href="#Answer-to-the-question" class="headerlink" title="Answer to the question"></a>Answer to the question</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">run</span><span class="params">(TreeNode root)</span> </span>&#123;</div><div class="line">      <span class="keyword">if</span>(root==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">      <span class="keyword">else</span> <span class="keyword">if</span>(root.left==<span class="keyword">null</span>)<span class="keyword">return</span> run(root.right)+<span class="number">1</span>;</div><div class="line">      <span class="keyword">else</span> <span class="keyword">if</span>(root.right==<span class="keyword">null</span>)<span class="keyword">return</span> run(root.left)+<span class="number">1</span>;</div><div class="line">      <span class="keyword">else</span>&#123;</div><div class="line">          <span class="keyword">return</span> Math.min(run(root.left), run(root.right))+<span class="number">1</span>;</div><div class="line">      &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The most important thing is that, it is a repeatitive process to calculate the depth from each child. So we find that if a node have both left and right node, we will choose a less depth. Apart from that, if the node just have right or left child node, we can choose the other one to calculate. Finally, if the node , don’t have a child, will return 0.</p>
<h1 id="逆波兰表达式运算"><a href="#逆波兰表达式运算" class="headerlink" title="逆波兰表达式运算"></a>逆波兰表达式运算</h1><h2 id="instruction"><a href="#instruction" class="headerlink" title="instruction"></a>instruction</h2><p>valuate the value of an arithmetic expression in Reverse Polish Notation.Valid operators are+,-,*,/. Each operand may be an integer or another expression. </p>
<h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solve</span><span class="params">(String []tokens)</span></span>&#123;</div><div class="line">    Stack&lt;Integer&gt; numStack = <span class="keyword">new</span> Stack&lt;&gt;();</div><div class="line">    <span class="keyword">for</span>(String term:tokens)&#123;</div><div class="line">        <span class="keyword">switch</span> (term)&#123;</div><div class="line">            <span class="keyword">case</span> <span class="string">"+"</span>:</div><div class="line">                numStack.push(numStack.pop()+numStack.pop());</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> <span class="string">"-"</span>:</div><div class="line">                <span class="keyword">int</span> a = numStack.pop();</div><div class="line">                numStack.push(numStack.pop()-a);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> <span class="string">"*"</span>:</div><div class="line">                numStack.push(numStack.pop()*numStack.pop());</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> <span class="string">"/"</span>:</div><div class="line">                <span class="keyword">int</span> b = numStack.pop();</div><div class="line">                numStack.push(numStack.pop()/b);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">default</span>: numStack.push(Integer.valueOf(term));</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> numStack.pop();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Be careful of that we need to take the operator’s order into account. In Reverse Polish Notation, different order means completely different experssion. So do not use two stacks to reserve operand or operator. In Reverse Polish Notationm, it is vital that if we meet a operator, we should find two operands in stack to calculate immediately and push the result in the stack.</p>
<h1 id="链表排序"><a href="#链表排序" class="headerlink" title="链表排序"></a>链表排序</h1><h2 id="instruction-1"><a href="#instruction-1" class="headerlink" title="instruction"></a>instruction</h2><p>Sort a linked list in O($nlogn$) time using constant space complexity.</p>
<h2 id="Answer-1"><a href="#Answer-1" class="headerlink" title="Answer"></a>Answer</h2><p>题目要求时间复杂度为O(nlogn)，可以考虑归并排序的思想</p>
<p>一般步骤：</p>
<ol>
<li>将待排序数组（链表）取中点一分为二</li>
<li>递归地对左半部分进行归并排序</li>
<li>递归地对右半部分进行归并排序</li>
<li>将两个部分合并</li>
</ol>
<h1 id="二叉树遍历方式"><a href="#二叉树遍历方式" class="headerlink" title="二叉树遍历方式"></a>二叉树遍历方式</h1><h2 id="instruction-2"><a href="#instruction-2" class="headerlink" title="instruction"></a>instruction</h2><p>Given a binary tree, return the preorder, postorder and  traversal of its nodes’ values.</p>
<h2 id="Personal-Views"><a href="#Personal-Views" class="headerlink" title="Personal Views"></a>Personal Views</h2><p>二叉树的遍历方式有三种，中序遍历、前序遍历、后序遍历。可以用访问根节点的次序来定义，并且左子节点的访问先于右子节点。即 前序遍历：根、左、右 ；中序遍历：左、根、右；后序遍历：左、右、根</p>
<h2 id="Postorder-Traversal"><a href="#Postorder-Traversal" class="headerlink" title="Postorder Traversal"></a>Postorder Traversal</h2><h3 id="栈实现"><a href="#栈实现" class="headerlink" title="栈实现"></a>栈实现</h3><p>思路：不同的遍历方式根本上是为了按照不同的次序访问节点。因此可以使用堆栈来调整元素位置。使用两个栈，stack1存放待访问的节点，stack2存放已访问节点，最后将stack2依次弹出则得到需要顺序。不同的顺序遍历结点入栈的顺序不同。</p>
<p>postorder Traversal, 最后stack2弹栈按照 左、右、根，因此stack2中存放顺序为 根、右、左，即节点从stack1存入stack2的顺序为 根、右、左，由此：</p>
<ul>
<li>stack1t弹栈得到带访问节点node，将此节点（根节点）存入stack2</li>
<li>访问node左子节点，将此节点存入stack1</li>
<li>访问node右子节点，将此节点存入stack1</li>
<li>从stack1弹栈得到下一个待访问节点 （右 $\rightarrow$ 左）</li>
</ul>
<h3 id="递归实现"><a href="#递归实现" class="headerlink" title="递归实现"></a>递归实现</h3><h2 id="Preorder-Traversal"><a href="#Preorder-Traversal" class="headerlink" title="Preorder Traversal"></a>Preorder Traversal</h2><h3 id="栈实现-1"><a href="#栈实现-1" class="headerlink" title="栈实现"></a>栈实现</h3><h3 id="递归实现-1"><a href="#递归实现-1" class="headerlink" title="递归实现"></a>递归实现</h3><p>存放次序为 根 、左 、右</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> ArrayList&lt;Integer&gt; <span class="title">preorderTraversal</span><span class="params">(TreeNode root)</span></span>&#123;</div><div class="line">    ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">    <span class="keyword">if</span>(root==<span class="keyword">null</span>)</div><div class="line">        <span class="keyword">return</span> list;</div><div class="line">    list.add(root.val);			<span class="comment">//先将根 存入列表</span></div><div class="line">    list.addAll(preorderTraversal(root.left));  <span class="comment">//左子节点存入列表</span></div><div class="line">    list.addAll(preorderTraversal(root.right));	<span class="comment">//右子节点存入列表</span></div><div class="line">    <span class="keyword">return</span> list;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> val;</div><div class="line">    TreeNode left;</div><div class="line">    TreeNode right;</div><div class="line">    TreeNode(<span class="keyword">int</span> x)&#123;val=x;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Collection"><a href="#Collection" class="headerlink" title="Collection"></a>Collection</h1><h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><h3 id="TwoSum"><a href="#TwoSum" class="headerlink" title="TwoSum"></a>TwoSum</h3><h4 id="Instruction-1"><a href="#Instruction-1" class="headerlink" title="Instruction"></a>Instruction</h4><p>Given an array of integers, find two numbers such that they add up to a specific target number.</p>
<p>The function twoSum should return indices of the two numbers such that they add up to the target, where index1 must be less than index2. Please note that your returned answers (both index1 and index2 ) are not zero-based.</p>
<p>You may assume that each input would have exactly on solution.</p>
<p><strong>Input</strong> : numbers = {2,7,11,15} , target = 9</p>
<p><strong>Output</strong> : index1 = 1,    index2 = 2</p>
<h4 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h4><p>Using map collection can solve this problem easily. For each pair of numbers, saving each num as a key of map, meanwhile saving index of the num as its value. Every time if we can not find the needed number , just put it in the map. So, the time we get a result is that the needed number we find is in the map.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.HashMap;</div><div class="line"><span class="keyword">import</span> java.util.Map;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TwoSum</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] numbers, <span class="keyword">int</span> target) &#123;</div><div class="line">        <span class="keyword">int</span>[] result = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</div><div class="line">        Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; numbers.length;i++)&#123;</div><div class="line">            <span class="keyword">if</span>(map.containsKey(target-numbers[i]))&#123;</div><div class="line">                result[<span class="number">1</span>] = i + <span class="number">1</span>;</div><div class="line">                result[<span class="number">0</span>] = map.get(target - numbers[i]);</div><div class="line">                <span class="keyword">return</span> result;</div><div class="line">            &#125;</div><div class="line">            map.put(numbers[i],i+<span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>Note</strong> : map.put(key , value) , map.get(key) . number -&gt; key , index -&gt; value</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/12/C10T2W1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="TianyLi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://oo9y7ylu4.bkt.clouddn.com/image/blog/headIcon/IMG_7483.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ty_Isaac">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/12/C10T2W1/" itemprop="url">
                  C10T2W1
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-12T14:18:33+08:00">
                2017-07-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/English/" itemprop="url" rel="index">
                    <span itemprop="name">英语</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/07/12/C10T2W1/" class="leancloud_visitors" data-flag-title="C10T2W1">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Writing-task1"><a href="#Writing-task1" class="headerlink" title="Writing task1"></a>Writing task1</h1><p>The tables illustrate sales of Fairtrade*-labelled coffee and bananas in UK, Switerland , Denmark , Belgium , and Sweden in 1999 and in 2004.</p>
<p>Switerland sold  3 millions of euros in coffee  in 1999 , which is twice more than that in UK, and increased to 6 milllions euros in 2004. The sales in Denmark rose from £1.8 million in 1999 to £2 million in 2004. In 1999 Sweden had the least sales, just £0.8 million.The sale of in UK increased a lot from £1.5 million in 1999 to £20 million in 2004.</p>
<p>As for sales of Fairtrade-labelled bananas. In 1999, Switzerland sold 15 millions of euros in bananas and had a huge increase to £47 million in 2004 . Denmark sold £2 million , twice as big as that in UK, while Belgium just sold 0.6. The sales in UK and Belgium increased to £5.5 million and £4 million in 2004 respectively.</p>
<p>In conclusion, sales of coffee in UK are the biggest in 2004,  while sales of bananas in Switzerland in 2004 are the biggest too.</p>
<p>30min</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://oo9y7ylu4.bkt.clouddn.com/image/blog/headIcon/IMG_7483.jpg"
               alt="TianyLi" />
          <p class="site-author-name" itemprop="name">TianyLi</p>
           
              <p class="site-description motion-element" itemprop="description">It's a bolg that belongs to a industrious programmer</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">36</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">TianyLi</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("KzDP5NgGACc0bKLgfEtJ8Xrk-gzGzoHsz", "nGixqUVUQJjtTFuvDaoKrMo0");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->



  

  

  

  

</body>
</html>
