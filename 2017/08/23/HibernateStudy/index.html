

<!DOCTYPE html>
<html lang="zh-Hans">
<head prefix="og: http://ogp.me/ns#">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <meta name="description" content="It&#39;s a bolg that belongs to a industrious programmer">
    <title>Hibernate Study | Ty_Isaac</title>

    <!-- Open Graph -->
    <meta name="description" content="Hibernate入门搭建hibernate环境第一步 导入hibernate的jar包 hibernate 文件中的required中的jar包要导入 jpa 中的 jar 包 因为使用 hibernate 时候，会有日志信息输出。hibernate 本身没有日志输出 jar 包，导入其他日志jar包 mysql驱动 jar 包  第二步 创建实体类hibernate要求实体类中有一个属性是唯一">
<meta name="keywords" content="dao,Hibernate框架">
<meta property="og:type" content="article">
<meta property="og:title" content="Hibernate Study">
<meta property="og:url" content="http://yoursite.com/2017/08/23/HibernateStudy/index.html">
<meta property="og:site_name" content="Ty_Isaac">
<meta property="og:description" content="Hibernate入门搭建hibernate环境第一步 导入hibernate的jar包 hibernate 文件中的required中的jar包要导入 jpa 中的 jar 包 因为使用 hibernate 时候，会有日志信息输出。hibernate 本身没有日志输出 jar 包，导入其他日志jar包 mysql驱动 jar 包  第二步 创建实体类hibernate要求实体类中有一个属性是唯一">
<meta property="og:updated_time" content="2017-09-15T23:19:15.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hibernate Study">
<meta name="twitter:description" content="Hibernate入门搭建hibernate环境第一步 导入hibernate的jar包 hibernate 文件中的required中的jar包要导入 jpa 中的 jar 包 因为使用 hibernate 时候，会有日志信息输出。hibernate 本身没有日志输出 jar 包，导入其他日志jar包 mysql驱动 jar 包  第二步 创建实体类hibernate要求实体类中有一个属性是唯一">

    <script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Person",
  "email": "mailto:undefined",
  "image": "undefined",
  "name": "TianyLi",
  "url": "http://yoursite.com"
}
</script>
    <script>
    var algoliaEnabled = false;
    
</script>

    

    
    
        <link href="//fonts.useso.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
    
    
    
        <!-- stylesheets list from config.yml -->
        
        <link rel="stylesheet" href="/css/aloha.css">
        
        <link rel="stylesheet" href="//cdn.bootcss.com/semantic-ui/2.2.4/semantic.min.css">
        
        <link rel="stylesheet" href="//cdn.bootcss.com/magnific-popup.js/1.1.0/magnific-popup.min.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
        
    

</head>
<body id="body" style="margin-bottom: 0;" class="pushable">

    <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="ui top fixed menu">
        <a class="item" id="menu-icon"><i class="sidebar icon"></i></a>
    </div>

    <div id="menu-sidebar" class="ui left vertical sidebar menu">

    <div id="sidebar-top">
        <div class="content">
            <h3>Ty_Isaac</h3>
        </div>
    </div>
    <div class="ui container sidebar-card">
    <div class="ui people shape content">
        <div class="active side">
            <div class="ui card">
                <div class="image">
                    <img class="ui medium bordered image" src="/images/avatar.jpg">
                </div>
                <div class="content">
                    <a class="header">TianyLi</a>
                    
                </div>
                <div class="extra content">
                    <div class="ui list">
                        
                        
                    </div>

                </div>
                <div class="extra content">
                    <div class="ui list">
                        
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>

    
    

    

    
    <a href="/index.html" class="item" >
        <i class="home icon"></i>
        HOME
    </a>

    

    
</div>

    <div class="pusher body-content">
        <div id="content" class="ui main container">
            <!--<div class="ui one column grid">-->
                <!--<div class="column">-->
                    <!--<div class="ui main container">-->
                        <div id="post-HibernateStudy" class="ui main container article-type-post">

    

    <div class="ui divided grid">

        <div class="two column row" id="article-content">

            <div class="thirteen wide computer thirteen wide tablet sixteen wide mobile column">
                

<h1 class="ui header">
    
    Hibernate Study
</h1>



                <div class="article-inner">

                    <div class="article-entry" itemprop="articleBody">
                        
                        <h1 id="Hibernate入门"><a href="#Hibernate入门" class="headerlink" title="Hibernate入门"></a>Hibernate入门</h1><h2 id="搭建hibernate环境"><a href="#搭建hibernate环境" class="headerlink" title="搭建hibernate环境"></a>搭建hibernate环境</h2><h4 id="第一步-导入hibernate的jar包"><a href="#第一步-导入hibernate的jar包" class="headerlink" title="第一步 导入hibernate的jar包"></a>第一步 导入hibernate的jar包</h4><ol>
<li>hibernate 文件中的required中的jar包要导入</li>
<li>jpa 中的 jar 包</li>
<li>因为使用 hibernate 时候，会有日志信息输出。hibernate 本身没有日志输出 jar 包，导入其他日志jar包</li>
<li>mysql驱动 jar 包</li>
</ol>
<h4 id="第二步-创建实体类"><a href="#第二步-创建实体类" class="headerlink" title="第二步 创建实体类"></a>第二步 创建实体类</h4><p>hibernate要求实体类中有一个属性是唯一的</p>
<h4 id="第三步-配置实体类和数据库表一一对应关系（映射关系）"><a href="#第三步-配置实体类和数据库表一一对应关系（映射关系）" class="headerlink" title="第三步  配置实体类和数据库表一一对应关系（映射关系）"></a>第三步  配置实体类和数据库表一一对应关系（映射关系）</h4><p>使用配置文件实现映射关系</p>
<ol>
<li>创建xml格式的配置文件<ul>
<li>映射配置文件和位置没有固定要求</li>
<li>建议：<strong>在实体类所在包里面创建，\<classname>.hbm.xml</classname></strong></li>
</ul>
</li>
<li>配置是xml格式，在配置文件中首先引入 xml 约束<ul>
<li>学过约束 dtd 、 schema 在hibernate 都是 dtd文件</li>
</ul>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE hibernate-mapping PUBLIC</div><div class="line">        &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</div><div class="line">        &quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;</div></pre></td></tr></table></figure>
<p>完整的配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"></div><div class="line"><span class="meta">&lt;!DOCTYPE hibernate-mapping PUBLIC</span></div><div class="line">        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"</div><div class="line">        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd"&gt;</div><div class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 1. 配置类和表对应</span></div><div class="line">            class 标签</div><div class="line">            name 属性： 实体类全路径</div><div class="line">            table 属性： 数据库表名称</div><div class="line">    --&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"User.User"</span> <span class="attr">table</span>=<span class="string">"t_user"</span> &gt;</span></div><div class="line">        <span class="comment">&lt;!-- 2. 配置实体类 id 和 表 id 对应</span></div><div class="line">                hibernate 要求在实体类有一个属性唯一值</div><div class="line">                hibernate 要求表有字段作为唯一值</div><div class="line">        --&gt;</div><div class="line">        <span class="comment">&lt;!-- id 标签</span></div><div class="line">                name属性: 实体类里面id属性名称</div><div class="line">                column属性: 生成的表字段名称</div><div class="line">        --&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"uid"</span> <span class="attr">column</span>=<span class="string">"uid"</span>&gt;</span></div><div class="line">            <span class="comment">&lt;!-- 设置数据库表id增长策略</span></div><div class="line">                 native: 生成id值主键自动增长--&gt;</div><div class="line">            <span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"native"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!--配置其他的属性和表字段对应</span></div><div class="line">            name属性: 实体类属性名称</div><div class="line">            column属性: 生成表的字段名</div><div class="line">        --&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">column</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">column</span>=<span class="string">"password"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"address"</span> <span class="attr">column</span>=<span class="string">"address"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>映射文件是一个以 \<hibernate-mapping> 为根元素的 XML 文件，里面包含所有 \<class> 标签</class></hibernate-mapping></li>
<li>\<class>标签是用来定义从一个 Java 类到数据库表的特定映射。Java 的类名使用 <strong>name</strong> 属性表示，数据库表名用<strong>table</strong>属性表示</class></li>
<li>\<meta> 标签是一个可选元素，被用来修饰类</li>
<li>\<id> 标签将类中的唯一属性与数据库表中主键关联。id 元素中的 <strong>name</strong> 属性引用类的性质， <strong>column</strong> 属性引用数据库表的列。 <strong>type</strong> 属性保存 hibernate 映射的类型，这个类型会将从 Java 转换成 SQL 数据类型</id></li>
<li>\<id> 标签下的\<generator> 标签用来自动生成主键值。设置 generator 标签中的 <strong>class</strong> 属性可以设置 <strong>native</strong></generator></id></li>
<li>\<property> 标签将Java 类的属性与数据库表的列匹配。标签中 <strong>name</strong> 属性引用的是类的元素，<strong>column</strong>属性引用的是数据库表的列。 <strong>type</strong> 属性保存Hibernate映射的类型，这个类型会将从Java转换为SQL数据类型</property></li>
</ul>
<h4 id="第四步-创建hibernate的核心配置文件"><a href="#第四步-创建hibernate的核心配置文件" class="headerlink" title="第四步  创建hibernate的核心配置文件"></a>第四步  创建hibernate的核心配置文件</h4><ol>
<li><p>核心配置文件格式 xml ，但是核心配置文件名称和位置式固定的</p>
<ul>
<li>位置：必须 src 下面</li>
<li>名称：必须hibernate.cfg.xml</li>
</ul>
</li>
<li><p>引入dtd约束</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE hibernate-configuration PUBLIC</div><div class="line">        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;</div><div class="line">        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>hibernate操作过程中，只会加载核心配置文件，其他配置文件不会进行加载</p>
</li>
</ol>
<h5 id="第一部分-配置数据库信息"><a href="#第一部分-配置数据库信息" class="headerlink" title="第一部分 配置数据库信息"></a>第一部分 配置数据库信息</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--第一部分：配置数据库信息--&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.driver_class"</span> &gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql:///hibernate_day01<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.username"</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.password"</span>&gt;</span>YourPassword<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div></pre></td></tr></table></figure>
<h5 id="第二部分-配置hibernate信息"><a href="#第二部分-配置hibernate信息" class="headerlink" title="第二部分 配置hibernate信息"></a>第二部分 配置hibernate信息</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--第二部分：配置hibernate信息 (可选的)--&gt;</span></div><div class="line">   <span class="comment">&lt;!--输出低层sql语句--&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.show_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">   <span class="comment">&lt;!--输出低层sql语句格式--&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.format_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">   <span class="comment">&lt;!--hibernate帮创建表，需要配置之后</span></div><div class="line">       update: 如果已经有表，更新，如果没有，创建</div><div class="line">   --&gt;</div><div class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">   <span class="comment">&lt;!-- 配置数据库方言，数据库中特有的设置关键字--&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.Mysql<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div></pre></td></tr></table></figure>
<h5 id="第三部分-把映射文件放到核心配置文件中"><a href="#第三部分-把映射文件放到核心配置文件中" class="headerlink" title="第三部分 把映射文件放到核心配置文件中"></a>第三部分 把映射文件放到核心配置文件中</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--第三部分：把映射文件放到配置文件中--&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>=<span class="string">"User/User.hbm.xml"</span> /&gt;</span></div></pre></td></tr></table></figure>
<p>注意路径中文件的位置，与当前的核心配置文件的相对路径</p>
<h2 id="实现添加操作"><a href="#实现添加操作" class="headerlink" title="实现添加操作"></a>实现添加操作</h2><h4 id="第一步-加载hibernate核心配置文件"><a href="#第一步-加载hibernate核心配置文件" class="headerlink" title="第一步 加载hibernate核心配置文件"></a>第一步 加载hibernate核心配置文件</h4><h4 id="第二步-创建SessionFactory对象"><a href="#第二步-创建SessionFactory对象" class="headerlink" title="第二步 创建SessionFactory对象"></a>第二步 创建SessionFactory对象</h4><h4 id="第三步-使用SessionFactory-创建Session对象"><a href="#第三步-使用SessionFactory-创建Session对象" class="headerlink" title="第三步 使用SessionFactory 创建Session对象"></a>第三步 使用SessionFactory 创建Session对象</h4><h4 id="第四步-开启事务"><a href="#第四步-开启事务" class="headerlink" title="第四步 开启事务"></a>第四步 开启事务</h4><h4 id="第五步-写具体逻辑-crud操作"><a href="#第五步-写具体逻辑-crud操作" class="headerlink" title="第五步 写具体逻辑 crud操作"></a>第五步 写具体逻辑 crud操作</h4><h4 id="第六步-提交事务"><a href="#第六步-提交事务" class="headerlink" title="第六步 提交事务"></a>第六步 提交事务</h4><h4 id="第七步-关闭资源"><a href="#第七步-关闭资源" class="headerlink" title="第七步 关闭资源"></a>第七步 关闭资源</h4><p>测试文件，使用单元测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> hibernateTest;</div><div class="line"></div><div class="line"><span class="keyword">import</span> User.User;</div><div class="line"><span class="keyword">import</span> org.hibernate.Session;</div><div class="line"><span class="keyword">import</span> org.hibernate.SessionFactory;</div><div class="line"><span class="keyword">import</span> org.hibernate.Transaction;</div><div class="line"><span class="keyword">import</span> org.hibernate.cfg.Configuration;</div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by isaac on 2017/9/3.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HibernateDemo</span> </span>&#123;</div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">TestADD</span><span class="params">()</span></span>&#123;</div><div class="line"><span class="comment">//    第一步 加载hibernate核心配置文件</span></div><div class="line">        <span class="comment">//在src下面找到名称是hibernate.cfg.xml</span></div><div class="line">        <span class="comment">//在hibernate里面封装对象</span></div><div class="line">        Configuration cfg = <span class="keyword">new</span> Configuration();</div><div class="line">        cfg.configure();</div><div class="line"><span class="comment">//    第二步 创建SessionFactory对象</span></div><div class="line">        <span class="comment">//读取hibernate中核心配置文件内容，创建sessionFactory</span></div><div class="line">        <span class="comment">//在此过程中，根据映射关系，在配置数据库里面把表创建</span></div><div class="line">        SessionFactory sessionFactory = cfg.buildSessionFactory();</div><div class="line"><span class="comment">//    第三步 使用SessionFactory 创建Session对象</span></div><div class="line">        <span class="comment">//类似于连接</span></div><div class="line">        Session session = sessionFactory.openSession();</div><div class="line"><span class="comment">//    第四步 开启事务</span></div><div class="line">        Transaction tx = session.beginTransaction();</div><div class="line"><span class="comment">//    第五步 写具体逻辑 crud操作</span></div><div class="line">        User user = <span class="keyword">new</span> User();</div><div class="line">        user.setUsername(<span class="string">"Isaac"</span>);</div><div class="line">        user.setPassword(<span class="string">"10086"</span>);</div><div class="line">        user.setAddress(<span class="string">"China"</span>);</div><div class="line">        <span class="comment">//调用session方法实现添加</span></div><div class="line">        session.save(user);</div><div class="line"><span class="comment">//    第六步 提交事务</span></div><div class="line">        tx.commit();</div><div class="line"><span class="comment">//    第七步 关闭资源</span></div><div class="line">        session.close();</div><div class="line">        sessionFactory.close();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Hibernate配置文件详解"><a href="#Hibernate配置文件详解" class="headerlink" title="Hibernate配置文件详解"></a>Hibernate配置文件详解</h1><h2 id="Hibernate映射配置文件"><a href="#Hibernate映射配置文件" class="headerlink" title="Hibernate映射配置文件"></a>Hibernate映射配置文件</h2><ol>
<li>映射配置文件名称和位置没有固定要求</li>
<li>映射配置文件中，标签name属性值写实体相关内容<ul>
<li>class 标签 name 属性值实体类全路径</li>
<li>id 标签和 property 标签 name 属性值 实体属性值</li>
</ul>
</li>
<li>id 标签和 property标签，column属性可以省略<ul>
<li>不写值，column和name属性值一样</li>
</ul>
</li>
<li>property标签type属性设置生成字段类型</li>
</ol>
<h2 id="Hibernate核心配置文件"><a href="#Hibernate核心配置文件" class="headerlink" title="Hibernate核心配置文件"></a>Hibernate核心配置文件</h2><ol>
<li>配置写位置要求 ，在session-factory下</li>
<li>配置三部分要求<ul>
<li>数据库部分必须</li>
<li>hibernate部分可选的</li>
<li>映射文件必须的</li>
</ul>
</li>
<li>核心配置文件名称和位置固定的<ul>
<li>位置：src下面</li>
<li>名称：hibernate.cfg.xml</li>
</ul>
</li>
</ol>
<h1 id="Hibernate核心API"><a href="#Hibernate核心API" class="headerlink" title="Hibernate核心API"></a>Hibernate核心API</h1><h2 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h2><ol>
<li><p>代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Configuration cfg = <span class="keyword">new</span> Configuration();</div><div class="line">   cfg.configure();</div></pre></td></tr></table></figure>
</li>
<li><p>到src下面找到名称hibernate.cfg.xml配置文件，创建对象，把配置文件放到对象里面（加载核心配置文件）</p>
</li>
</ol>
<h2 id="SessionFactory（重点）"><a href="#SessionFactory（重点）" class="headerlink" title="SessionFactory（重点）"></a>SessionFactory（重点）</h2><ol>
<li><p>使用configuration对象创建SessionFactory对象</p>
<ol>
<li><p>创建SessionFactory过程中坐的事情：</p>
<ul>
<li><p>根据核心配置文件中，有数据库配置，有文件映射部分，到数据库里面根据映射关系把表创</p>
</li>
<li><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
</li>
<li><p>创建sessionFactory过程中，整个过程特别消耗资源</p>
<ol>
<li>在Hibernate操作中，建议一个项目一般创建一个SessionFactory对象</li>
</ol>
</li>
<li><p>具体实现</p>
<ol>
<li><p>写工具类，写静态代码块实现</p>
<p>静态代码块在类加载时候执行，执行一次</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HibernateUtils</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Configuration cfg = <span class="keyword">null</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SessionFactory sessionFactory = <span class="keyword">null</span>;</div><div class="line">    <span class="keyword">static</span> &#123;</div><div class="line">        cfg = <span class="keyword">new</span> Configuration();</div><div class="line">        cfg.configure();</div><div class="line">        sessionFactory = cfg.buildSessionFactory();</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SessionFactory <span class="title">getSessionFactory</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> sessionFactory;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<h2 id="Session-重点"><a href="#Session-重点" class="headerlink" title="Session(重点)"></a>Session(重点)</h2><ol>
<li>Session 类似于 JDBC 中connection</li>
<li>调用session里不同的方法实现 crud 操作<ul>
<li>添加 save()</li>
<li>修改 update()</li>
<li>删除 delelte()</li>
<li>根据 id 查询 get()</li>
</ul>
</li>
<li>session对象单线程对象<ul>
<li>session对象不能共用，只能自己使用</li>
</ul>
</li>
</ol>
<h2 id="Transaction"><a href="#Transaction" class="headerlink" title="Transaction"></a>Transaction</h2><ol>
<li><p>事务对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Transaction tx = session.beginTransaction();</div></pre></td></tr></table></figure>
</li>
<li><p>事务提交和回滚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">tx.commit();</div><div class="line">tx.rollback();</div></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="实体类编写规则"><a href="#实体类编写规则" class="headerlink" title="实体类编写规则"></a>实体类编写规则</h1><ol>
<li><p>实体类里面属性私有的</p>
</li>
<li><p>私有属性使用公开的 set 和 get 方法</p>
</li>
<li><p>要求实体属性有唯一值(一般使用id值)</p>
</li>
<li><p>实体类属性建议不使用基本数据类型，使用基本数据类型对应的包装类</p>
<ol>
<li>八个基本数据类型对应的包装类<ul>
<li>int - Integer</li>
<li>char - Character</li>
<li>其他的都是首字母大写 比如 double - Double</li>
</ul>
</li>
<li>比如 表示学生分数，假如 int score<ul>
<li>学生得了 0 分 ， int score = 0 ；</li>
<li>学生没参加考试 ， int score = 0；不能准确表示学生是否参加考试</li>
</ul>
</li>
</ol>
<p>解决：使用包装类就可以，Integer score = 0, 表示学生得了 0 分；Integer score = null 表示学生没有参加考试</p>
</li>
</ol>
<h1 id="主键生成规则"><a href="#主键生成规则" class="headerlink" title="主键生成规则"></a>主键生成规则</h1><h1 id="实体类crud操作"><a href="#实体类crud操作" class="headerlink" title="实体类crud操作"></a>实体类crud操作</h1><h3 id="添加操作"><a href="#添加操作" class="headerlink" title="添加操作"></a>添加操作</h3><ol>
<li><p>调用session里面的save方法实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">User user = <span class="keyword">new</span> User();</div><div class="line">user.setUsername(<span class="string">"小马"</span>);</div><div class="line">user.setPassword(<span class="string">"10080"</span>);</div><div class="line">user.setAddress(<span class="string">"Panda"</span>);</div><div class="line"><span class="comment">//调用session方法实现添加</span></div><div class="line">session.save(user);</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="根据id进行操作"><a href="#根据id进行操作" class="headerlink" title="根据id进行操作"></a>根据id进行操作</h3><ol>
<li><p>调用session里面的get方法实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//第一个参数：实体类的class</span></div><div class="line"><span class="comment">//第二个参数：id值</span></div><div class="line"> User user = session.get(User.class,<span class="number">1</span>);</div><div class="line"> System.out.println(user);</div></pre></td></tr></table></figure>
</li>
<li><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span></div><div class="line">        user0_.uid <span class="keyword">as</span> uid1_0_0_,</div><div class="line">        user0_.username <span class="keyword">as</span> username2_0_0_,</div><div class="line">        user0_.password <span class="keyword">as</span> password3_0_0_,</div><div class="line">        user0_.address <span class="keyword">as</span> address4_0_0_ </div><div class="line">    <span class="keyword">from</span></div><div class="line">        t_user user0_ </div><div class="line">    <span class="keyword">where</span></div><div class="line">        user0_.uid=?</div></pre></td></tr></table></figure>
<p>执行结果如上</p>
</li>
</ol>
<h3 id="修改操作"><a href="#修改操作" class="headerlink" title="修改操作"></a>修改操作</h3><p>首先查询，再修改值</p>
<ol>
<li>根据 id 查询，返回对象</li>
<li>根据uid修改对象</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//根据 id 查询</span></div><div class="line">User user = session.get(User.class,<span class="number">2</span>);</div><div class="line"><span class="comment">//向返回的user对象里面设置修改以后的值</span></div><div class="line">user.setUsername(<span class="string">"Utoly"</span>);</div><div class="line"><span class="comment">//调用session方法修改</span></div><div class="line"><span class="comment">//执行过程：到user对象中，找到Uid值，根据uid进行修改</span></div><div class="line">session.update(user);</div></pre></td></tr></table></figure>
<h3 id="删除操作"><a href="#删除操作" class="headerlink" title="删除操作"></a>删除操作</h3><p>调用session里面 delete方法实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//第一种 根据id查询对象</span></div><div class="line">User user = session.get(User.class,<span class="number">2</span>);</div><div class="line">session.delete(user);</div><div class="line"><span class="comment">//第二种</span></div><div class="line">User user1 = <span class="keyword">new</span> User();</div><div class="line">user1.setUid(<span class="number">1</span>);</div><div class="line">session.delete(user1);</div></pre></td></tr></table></figure>
<h1 id="实体类对象状态（概念）"><a href="#实体类对象状态（概念）" class="headerlink" title="实体类对象状态（概念）"></a>实体类对象状态（概念）</h1><ol>
<li>实体类对象有三种<ol>
<li>瞬时态：对象里面没有 id 值，对象与 session 也没有关系</li>
<li>持久态：对象里面有 id  值，对象与session 有关联</li>
<li>托管态：对象有 id 值，对象与 sessinon 没有关联</li>
</ol>
</li>
<li>演示操作实体类对象的方法<ol>
<li>saveOrUpdate 方法：实现添加、修改</li>
</ol>
</li>
</ol>
<h1 id="Hibernate的一级缓存"><a href="#Hibernate的一级缓存" class="headerlink" title="Hibernate的一级缓存"></a>Hibernate的一级缓存</h1><h2 id="什么是缓存"><a href="#什么是缓存" class="headerlink" title="什么是缓存"></a>什么是缓存</h2><p> 数据存到数据库里面，数据库本身是文件系统，使用流方式操作文件效率不高</p>
<ul>
<li>把数据存到内存中，不需要使用流方式，可以直接读取内存中数据</li>
<li>把数据放到内存中，提供读取效率</li>
</ul>
<h2 id="Hibernate缓存"><a href="#Hibernate缓存" class="headerlink" title="Hibernate缓存"></a>Hibernate缓存</h2><ol>
<li>hibernate框架中提供很多优化方式，hibernate的缓存就是一个优化方式</li>
<li>hibernate缓存特点：<ol>
<li>hibernate的一级缓存<ul>
<li>hibernate 的一级缓存默认打开</li>
<li>hibernate 的一级缓存使用范围，是 session 范围，从 session 创建到session关闭</li>
<li>hibernate的一级缓存中，存储数据必须 持久态数据</li>
</ul>
</li>
<li>hibernate的二级缓存<ul>
<li>目前已经不使用了，替代技术 redis </li>
<li>二级缓存默认不是打开的，需要配置</li>
<li>二级缓存使用范围，是 SessionFactory 范围</li>
</ul>
</li>
</ol>
</li>
<li>验证一级缓存存在</li>
</ol>
<h1 id="Hibernate-绑定-session"><a href="#Hibernate-绑定-session" class="headerlink" title="Hibernate 绑定 session"></a>Hibernate 绑定 session</h1><ol>
<li><p>在hibernate核心配置文件中配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.current_session_context_class"</span>&gt;</span>thread<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div></pre></td></tr></table></figure>
<p>​</p>
</li>
<li><p>调用sessionFactory里面的方法得到</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//提供返回与本地线程绑定的session的方法</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Session <span class="title">getSession</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> sessionFactory.getCurrentSession();</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="Hibernate的-API-使用"><a href="#Hibernate的-API-使用" class="headerlink" title="Hibernate的 API 使用"></a>Hibernate的 API 使用</h1><h2 id="Query-对象"><a href="#Query-对象" class="headerlink" title="Query 对象"></a>Query 对象</h2><ol>
<li>使用query对象，不需要写 sql 语句，但是写 hql 语句<ul>
<li>hql: hibernate query language , hibernatenate 提供查询语句，这个hql语句与普通SQL语句很相似</li>
<li>hql 与 sql 的区别：<ul>
<li>使用 sql 操作表和表字段</li>
<li>使用 hql 操作实体类和属性</li>
</ul>
</li>
</ul>
</li>
</ol>
<ol>
<li><p>查询所有 hql 语句：</p>
<p>from 实体类名称</p>
</li>
<li><p>Query 对象使用</p>
<ol>
<li>创建 query 对象</li>
<li>调用 query 对象里面的方法</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1. 创建query对象</span></div><div class="line"><span class="comment">//方法里写hql语句</span></div><div class="line">Query query = session.createQuery(<span class="string">"from User"</span>);</div><div class="line"><span class="comment">//2. 调用query对象的方法得到结果</span></div><div class="line">List&lt;User&gt; list = query.list();</div><div class="line"><span class="keyword">for</span>(User user:list)&#123;</div><div class="line">  System.out.println(user);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>​</p>
</li>
</ol>
<h2 id="Criteria-对象"><a href="#Criteria-对象" class="headerlink" title="Criteria 对象"></a>Criteria 对象</h2><ol>
<li><p>这个对象查询操作，但是使用这个对象时候，不需要写语句，直接调用方法实现。</p>
</li>
<li><p>实现过程</p>
<ul>
<li>创建 criteria 对象</li>
<li>调用方法得到结果</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1.创建criteria对象</span></div><div class="line">Criteria criteria = session.createCriteria(User.class);</div><div class="line"><span class="comment">//2.调用方法得到结果</span></div><div class="line">List&lt;User&gt; list = criteria.list();</div><div class="line"><span class="keyword">for</span>(User user : list)&#123;</div><div class="line">   System.out.println(user);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>​</p>
</li>
</ol>
<h2 id="SQL-Query-对象"><a href="#SQL-Query-对象" class="headerlink" title="SQL Query 对象"></a>SQL Query 对象</h2><ol>
<li><p>使用 hibernate 时候，调用低层 sql 实现</p>
</li>
<li><p>实现过程</p>
<ul>
<li>创建对象</li>
<li>调用对象的方法得到结果</li>
<li>返回list集合每部分是数组</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1.创建对象</span></div><div class="line">SQLQuery sqlQuery = session.createSQLQuery(<span class="string">"select * from t_user"</span>);</div><div class="line">List&lt;Object[]&gt; list = sqlQuery.list();</div><div class="line"><span class="comment">//返回每部分都是数组</span></div><div class="line"><span class="keyword">for</span>(Object[] objects:list)&#123;</div><div class="line">   System.out.println(Arrays.toString(objects));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>返回list中每部分是对象形式</li>
</ul>
</li>
</ol>
<h1 id="表与表之间关系回顾"><a href="#表与表之间关系回顾" class="headerlink" title="表与表之间关系回顾"></a>表与表之间关系回顾</h1><h2 id="一对多"><a href="#一对多" class="headerlink" title="一对多"></a>一对多</h2><ul>
<li>分类和商品关系，一个分类里有多个商品，一个商品只有一个分类</li>
<li>客户和联系人是一对多关系<ul>
<li>客户：与公司有业务往来，百度、新浪、360…</li>
<li>联系人：</li>
</ul>
</li>
</ul>
<h2 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h2><ul>
<li>订单和商品，一个订单里有多个商品，一个商品可以属于多个订单</li>
<li>用户和角色多对多关系<ul>
<li>用户：小王、小马、小宋</li>
<li>角色：总经理、秘书、司机、保安</li>
<li>一个用户可以有多个角色，一个角色有多个用户</li>
</ul>
</li>
</ul>
<h2 id="一对一"><a href="#一对一" class="headerlink" title="一对一"></a>一对一</h2><h1 id="Hibernate的一对多操作（重点）"><a href="#Hibernate的一对多操作（重点）" class="headerlink" title="Hibernate的一对多操作（重点）"></a>Hibernate的一对多操作（重点）</h1><h2 id="一对多映射配置"><a href="#一对多映射配置" class="headerlink" title="一对多映射配置"></a>一对多映射配置</h2><p>以客户和联系人为例，客户是一，联系人是多</p>
<h3 id="第一步-创建实体类"><a href="#第一步-创建实体类" class="headerlink" title="第一步 创建实体类"></a>第一步 创建实体类</h3><h3 id="第二步-让两个实体类之间相互表示"><a href="#第二步-让两个实体类之间相互表示" class="headerlink" title="第二步 让两个实体类之间相互表示"></a>第二步 让两个实体类之间相互表示</h3><ol>
<li>在客户实体类里面表示多个联系人<ul>
<li>一个客户里面有多个联系人 </li>
<li>Hibernate要求使用集合表示多的数据 set</li>
</ul>
</li>
<li>在联系人实体类里面表示所属客户</li>
</ol>
<h3 id="第三步-配置映射关系"><a href="#第三步-配置映射关系" class="headerlink" title="第三步 配置映射关系"></a>第三步 配置映射关系</h3><p>在客户映射文件中，表示所有联系人</p>
<p>使用 set 标签表示所有联系人</p>
<p>set标签里面有name属性，属性值写在客户实体类里面表示联系人的 set 集合名称</p>
<h2 id="一对多级联操作"><a href="#一对多级联操作" class="headerlink" title="一对多级联操作"></a>一对多级联操作</h2>
                        
                    </div>

                    
                    
                    

                    <div class="description post-description">
    <span class="post-description-item">
        <time datetime="2017-08-23T07:55:58.000Z" itemprop="datePublished">2017-08-23</time>

    </span>
    <span class="post-description-item">
        

    <span>
        <i class="tags icon"></i>
    </span>

    
    <span class="ui tiny label">
        <a href="/tags/dao/">dao</a>
    </span>

    
    <span class="ui tiny label">
        <a href="/tags/Hibernate框架/">Hibernate框架</a>
    </span>

    

    </span>
</div>

                </div>
                
                <div id="pagination" class="nav-web ui text container pagination">

    <div class="ui stackable two column divided grid container">
        <div class="row">
            <div class="column nav-left">
                

                <a href="/2017/07/12/编程训练/" class="ui tiny button">

                    <i class="angle left icon"></i>
                    
                    编程训练
                    

                </a>

                
            </div>
            <div class="column nav-right">
                

                <a href="/2017/08/24/JavaUtil/" class="ui tiny button">
                    
                    JavaUtil
                    
                    <i class="angle right icon"></i></a>
                
            </div>
        </div>
    </div>

</div>
                
            </div>

            
            <div class="three wide computer three wide tablet column">

                <div class="ui sticky article-toc" id="article-toc">
                    <!-- toc -->
                    <ol class="ui ordered list"><li><a href="#Hibernate入门"><span>Hibernate入门</span></a><ol><li><a href="#搭建hibernate环境"><span>搭建hibernate环境</span></a><ol><li><a href="#第一步-导入hibernate的jar包"><span>第一步 导入hibernate的jar包</span></a></li><li><a href="#第二步-创建实体类"><span>第二步 创建实体类</span></a></li><li><a href="#第三步-配置实体类和数据库表一一对应关系（映射关系）"><span>第三步  配置实体类和数据库表一一对应关系（映射关系）</span></a></li><li><a href="#第四步-创建hibernate的核心配置文件"><span>第四步  创建hibernate的核心配置文件</span></a><ol><li><a href="#第一部分-配置数据库信息"><span>第一部分 配置数据库信息</span></a></li><li><a href="#第二部分-配置hibernate信息"><span>第二部分 配置hibernate信息</span></a></li><li><a href="#第三部分-把映射文件放到核心配置文件中"><span>第三部分 把映射文件放到核心配置文件中</span></a></li></ol></li></ol></li></ol></li><li><a href="#实现添加操作"><span>实现添加操作</span></a><ol><li><a href="#第一步-加载hibernate核心配置文件"><span>第一步 加载hibernate核心配置文件</span></a></li><li><a href="#第二步-创建SessionFactory对象"><span>第二步 创建SessionFactory对象</span></a></li><li><a href="#第三步-使用SessionFactory-创建Session对象"><span>第三步 使用SessionFactory 创建Session对象</span></a></li><li><a href="#第四步-开启事务"><span>第四步 开启事务</span></a></li><li><a href="#第五步-写具体逻辑-crud操作"><span>第五步 写具体逻辑 crud操作</span></a></li><li><a href="#第六步-提交事务"><span>第六步 提交事务</span></a></li><li><a href="#第七步-关闭资源"><span>第七步 关闭资源</span></a></li></ol></li></ol></li></ol></li><li><a href="#Hibernate配置文件详解"><span>Hibernate配置文件详解</span></a><ol><li><a href="#Hibernate映射配置文件"><span>Hibernate映射配置文件</span></a></li><li><a href="#Hibernate核心配置文件"><span>Hibernate核心配置文件</span></a></li></ol></li><li><a href="#Hibernate核心API"><span>Hibernate核心API</span></a><ol><li><a href="#Configuration"><span>Configuration</span></a></li><li><a href="#SessionFactory（重点）"><span>SessionFactory（重点）</span></a></li><li><a href="#Session-重点"><span>Session(重点)</span></a></li><li><a href="#Transaction"><span>Transaction</span></a></li></ol></li><li><a href="#实体类编写规则"><span>实体类编写规则</span></a></li><li><a href="#主键生成规则"><span>主键生成规则</span></a></li><li><a href="#实体类crud操作"><span>实体类crud操作</span></a><ol><li><a href="#添加操作"><span>添加操作</span></a></li><li><a href="#根据id进行操作"><span>根据id进行操作</span></a></li><li><a href="#修改操作"><span>修改操作</span></a></li><li><a href="#删除操作"><span>删除操作</span></a></li></ol></li></ol></li><li><a href="#实体类对象状态（概念）"><span>实体类对象状态（概念）</span></a></li><li><a href="#Hibernate的一级缓存"><span>Hibernate的一级缓存</span></a><ol><li><a href="#什么是缓存"><span>什么是缓存</span></a></li><li><a href="#Hibernate缓存"><span>Hibernate缓存</span></a></li></ol></li><li><a href="#Hibernate-绑定-session"><span>Hibernate 绑定 session</span></a></li><li><a href="#Hibernate的-API-使用"><span>Hibernate的 API 使用</span></a><ol><li><a href="#Query-对象"><span>Query 对象</span></a></li><li><a href="#Criteria-对象"><span>Criteria 对象</span></a></li><li><a href="#SQL-Query-对象"><span>SQL Query 对象</span></a></li></ol></li><li><a href="#表与表之间关系回顾"><span>表与表之间关系回顾</span></a><ol><li><a href="#一对多"><span>一对多</span></a></li><li><a href="#多对多"><span>多对多</span></a></li><li><a href="#一对一"><span>一对一</span></a></li></ol></li><li><a href="#Hibernate的一对多操作（重点）"><span>Hibernate的一对多操作（重点）</span></a><ol><li><a href="#一对多映射配置"><span>一对多映射配置</span></a><ol><li><a href="#第一步-创建实体类"><span>第一步 创建实体类</span></a></li><li><a href="#第二步-让两个实体类之间相互表示"><span>第二步 让两个实体类之间相互表示</span></a></li><li><a href="#第三步-配置映射关系"><span>第三步 配置映射关系</span></a></li></ol></li><li><a href="#一对多级联操作"><span>一对多级联操作</span></a></li></ol></li></ol>
                </div>

            </div>
            

        </div>
    </div>
</div>


                    <!--</div>-->
                <!--</div>-->
            <!--</div>-->
        </div>
        <div class="ui vertical footer segment">
    <div class="ui center aligned container">
        <div class="ui inverted section divider"></div>
        &copy; 2018 <a href="/">TianyLi</a>,
        Powered by <a href="https://github.com/henryhuang/hexo-theme-aloha" target="_blank">Aloha</a> and <a
                href="http://hexo.io/" target="_blank">Hexo</a>.
    </div>
</div>

    </div>




<!-- scripts list from theme config.yml -->

<script src="//cdn.bootcss.com/jquery/3.1.0/jquery.min.js"></script>

<script src="//cdn.bootcss.com/semantic-ui/2.2.4/semantic.min.js"></script>

<script src="//cdn.bootcss.com/algoliasearch/3.18.1/algoliasearch.min.js"></script>

<script src="//cdn.bootcss.com/algoliasearch-helper-js/2.13.0/algoliasearch.helper.min.js"></script>

<script src="/js/semantic-ui-algolia.js"></script>

<script src="/js/aloha-events.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->



</body>
</html>
